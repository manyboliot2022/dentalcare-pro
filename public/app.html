<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DentalCare Pro - Gestion de Cabinet Dentaire</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* ═══════════════════════════════════════════════════════════
           VARIABLES CSS - Thème médical moderne
           ═══════════════════════════════════════════════════════════ */
        :root {
            /* Palette principale */
            --primary: #0891b2;
            --primary-dark: #0e7490;
            --primary-light: #22d3ee;
            --primary-bg: #ecfeff;
            
            /* Couleurs sémantiques */
            --success: #10b981;
            --success-bg: #d1fae5;
            --warning: #f59e0b;
            --warning-bg: #fef3c7;
            --danger: #ef4444;
            --danger-bg: #fee2e2;
            --info: #6366f1;
            --info-bg: #e0e7ff;
            
            /* Neutres */
            --bg-main: #f8fafc;
            --bg-card: #ffffff;
            --bg-sidebar: #0f172a;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            
            /* Espacements */
            --sidebar-width: 260px;
            --header-height: 70px;
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* Ombres */
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
        }

        /* ═══════════════════════════════════════════════════════════
           RESET & BASE
           ═══════════════════════════════════════════════════════════ */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.3;
        }

        /* ═══════════════════════════════════════════════════════════
           LAYOUT PRINCIPAL
           ═══════════════════════════════════════════════════════════ */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* ═══════════════════════════════════════════════════════════
           SIDEBAR - Navigation latérale
           ═══════════════════════════════════════════════════════════ */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-sidebar);
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 100;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .logo-text {
            color: white;
            font-size: 1.25rem;
            font-weight: 700;
        }

        .logo-text span {
            color: var(--primary-light);
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-section-title {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 0 12px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: #cbd5e1;
            text-decoration: none;
            border-radius: var(--radius-md);
            margin-bottom: 4px;
            transition: all 0.2s ease;
            cursor: pointer;
            font-size: 0.925rem;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.08);
            color: white;
        }

        .nav-item.active {
            background: var(--primary);
            color: white;
        }

        .nav-item i {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--danger);
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 10px;
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .user-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-md);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--info) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-info {
            flex: 1;
            min-width: 0;
        }

        .user-name {
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .user-role {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .logout-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            transition: all 0.2s ease;
            text-decoration: none;
        }
        
        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
        
        .logout-btn i {
            width: 18px;
            height: 18px;
        }

        /* ═══════════════════════════════════════════════════════════
           MAIN CONTENT
           ═══════════════════════════════════════════════════════════ */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .main-header {
            height: var(--header-height);
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .search-bar {
            position: relative;
        }

        .search-bar input {
            width: 280px;
            padding: 10px 16px 10px 44px;
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            font-size: 0.875rem;
            background: var(--bg-main);
            transition: all 0.2s ease;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-bg);
        }

        .search-bar i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            width: 18px;
            height: 18px;
        }

        .header-btn {
            width: 42px;
            height: 42px;
            border: none;
            background: var(--bg-main);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .header-btn:hover {
            background: var(--primary-bg);
            color: var(--primary);
        }

        .header-btn .badge {
            position: absolute;
            top: 6px;
            right: 6px;
            width: 8px;
            height: 8px;
            background: var(--danger);
            border-radius: 50%;
        }

        /* Page Content */
        .page-content {
            flex: 1;
            padding: 32px;
        }

        /* ═══════════════════════════════════════════════════════════
           CARDS & COMPOSANTS
           ═══════════════════════════════════════════════════════════ */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
        }

        .card-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            color: var(--primary);
        }

        .card-body {
            padding: 24px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 24px;
            border: 1px solid var(--border);
            display: flex;
            align-items: flex-start;
            gap: 16px;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .stat-icon.primary { background: var(--primary-bg); color: var(--primary); }
        .stat-icon.success { background: var(--success-bg); color: var(--success); }
        .stat-icon.warning { background: var(--warning-bg); color: var(--warning); }
        .stat-icon.danger { background: var(--danger-bg); color: var(--danger); }
        .stat-icon.info { background: var(--info-bg); color: var(--info); }

        .stat-content {
            flex: 1;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.8rem;
            margin-top: 8px;
        }

        .stat-trend.up { color: var(--success); }
        .stat-trend.down { color: var(--danger); }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--bg-main);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--border-light);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: var(--radius-sm);
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }

        th {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            background: var(--bg-main);
        }

        tr:hover td {
            background: var(--bg-main);
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-success { background: var(--success-bg); color: var(--success); }
        .badge-warning { background: var(--warning-bg); color: var(--warning); }
        .badge-danger { background: var(--danger-bg); color: var(--danger); }
        .badge-info { background: var(--info-bg); color: var(--info); }
        .badge-primary { background: var(--primary-bg); color: var(--primary); }

        /* Patient Avatar */
        .patient-cell {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .patient-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .patient-info h4 {
            font-size: 0.925rem;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .patient-info p {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* ═══════════════════════════════════════════════════════════
           PAGE : DASHBOARD
           ═══════════════════════════════════════════════════════════ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }

        .appointments-today {
            margin-bottom: 24px;
        }

        .appointment-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-main);
            border-radius: var(--radius-md);
            margin-bottom: 12px;
            transition: all 0.2s ease;
        }

        .appointment-item:hover {
            background: var(--primary-bg);
        }

        .appointment-time {
            text-align: center;
            min-width: 70px;
        }

        .appointment-time .time {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .appointment-time .duration {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .appointment-divider {
            width: 3px;
            height: 50px;
            background: var(--primary);
            border-radius: 2px;
        }

        .appointment-details {
            flex: 1;
        }

        .appointment-details h4 {
            font-size: 0.925rem;
            margin-bottom: 4px;
        }

        .appointment-details p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .quick-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px;
            background: var(--bg-main);
            border-radius: var(--radius-md);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
        }

        .quick-action:hover {
            background: var(--primary-bg);
            transform: translateY(-2px);
        }

        .quick-action i {
            width: 28px;
            height: 28px;
            color: var(--primary);
        }

        .quick-action span {
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* ═══════════════════════════════════════════════════════════
           PAGE : PATIENTS
           ═══════════════════════════════════════════════════════════ */
        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .filters-bar {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 24px;
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            margin-bottom: 24px;
            border: 1px solid var(--border);
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-group label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .filter-group select,
        .filter-group input {
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
            background: white;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .actions-cell {
            display: flex;
            gap: 8px;
        }

        /* ═══════════════════════════════════════════════════════════
           PAGE : FICHE PATIENT
           ═══════════════════════════════════════════════════════════ */
        .patient-profile {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
        }

        .patient-sidebar-card {
            text-align: center;
            padding: 32px 24px;
        }

        .patient-avatar-lg {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 2rem;
            margin: 0 auto 16px;
        }

        .patient-sidebar-card h2 {
            font-size: 1.25rem;
            margin-bottom: 4px;
        }

        .patient-sidebar-card .patient-id {
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-bottom: 16px;
        }

        .patient-contact {
            text-align: left;
            border-top: 1px solid var(--border);
            padding-top: 20px;
            margin-top: 20px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            font-size: 0.875rem;
        }

        .contact-item i {
            width: 18px;
            height: 18px;
            color: var(--primary);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 4px;
            border-bottom: 2px solid var(--border);
            margin-bottom: 24px;
        }

        .tab {
            padding: 12px 20px;
            font-size: 0.925rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            border: none;
            background: none;
            position: relative;
            transition: all 0.2s ease;
        }

        .tab:hover {
            color: var(--primary);
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form Grid */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 0.925rem;
            transition: all 0.2s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-bg);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 32px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 24px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -28px;
            top: 4px;
            width: 14px;
            height: 14px;
            background: var(--primary);
            border-radius: 50%;
            border: 3px solid var(--bg-card);
        }

        .timeline-date {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .timeline-content {
            background: var(--bg-main);
            padding: 16px;
            border-radius: var(--radius-md);
        }

        .timeline-content h4 {
            font-size: 0.925rem;
            margin-bottom: 6px;
        }

        .timeline-content p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* ═══════════════════════════════════════════════════════════
           PAGE : AGENDA
           ═══════════════════════════════════════════════════════════ */
        .agenda-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .agenda-nav {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .agenda-nav h2 {
            font-size: 1.25rem;
            min-width: 200px;
            text-align: center;
        }

        .agenda-view-toggle {
            display: flex;
            background: var(--bg-main);
            border-radius: var(--radius-md);
            padding: 4px;
        }

        .view-btn {
            padding: 8px 16px;
            border: none;
            background: none;
            font-size: 0.875rem;
            cursor: pointer;
            border-radius: var(--radius-sm);
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .view-btn.active {
            background: var(--primary);
            color: white;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: 80px repeat(7, 1fr);
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .calendar-header {
            display: contents;
        }

        .calendar-header > div {
            padding: 16px;
            text-align: center;
            background: var(--bg-main);
            font-weight: 600;
            font-size: 0.875rem;
            border-bottom: 1px solid var(--border);
        }

        .calendar-header .day-name {
            color: var(--text-secondary);
            font-size: 0.75rem;
            text-transform: uppercase;
        }

        .calendar-header .day-number {
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .calendar-header .today .day-number {
            background: var(--primary);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-top: 4px;
        }

        .time-slot {
            padding: 8px;
            font-size: 0.75rem;
            color: var(--text-muted);
            text-align: right;
            border-right: 1px solid var(--border);
            border-bottom: 1px solid var(--border-light);
            min-height: 60px;
        }

        .calendar-cell {
            border-bottom: 1px solid var(--border-light);
            border-right: 1px solid var(--border-light);
            min-height: 60px;
            padding: 4px;
            position: relative;
        }

        .calendar-event {
            padding: 6px 10px;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            margin-bottom: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calendar-event:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-md);
        }

        .calendar-event.consultation {
            background: var(--primary-bg);
            border-left: 3px solid var(--primary);
            color: var(--primary-dark);
        }

        .calendar-event.urgence {
            background: var(--danger-bg);
            border-left: 3px solid var(--danger);
            color: #991b1b;
        }

        .calendar-event.controle {
            background: var(--success-bg);
            border-left: 3px solid var(--success);
            color: #166534;
        }

        .calendar-event .event-time {
            font-weight: 600;
        }

        .calendar-event .event-patient {
            margin-top: 2px;
        }

        /* ═══════════════════════════════════════════════════════════
           PAGE : DEVIS & FACTURES
           ═══════════════════════════════════════════════════════════ */
        .invoice-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .invoice-stat {
            background: var(--bg-card);
            padding: 20px;
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
            text-align: center;
        }

        .invoice-stat .amount {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .invoice-stat .label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .invoice-stat.paid .amount { color: var(--success); }
        .invoice-stat.pending .amount { color: var(--warning); }
        .invoice-stat.overdue .amount { color: var(--danger); }

        /* ═══════════════════════════════════════════════════════════
           PAGE : STOCK
           ═══════════════════════════════════════════════════════════ */
        .stock-alerts {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }

        .stock-alert {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 20px;
            border-radius: var(--radius-md);
            border: 1px solid;
        }

        .stock-alert.danger {
            background: var(--danger-bg);
            border-color: var(--danger);
        }

        .stock-alert.warning {
            background: var(--warning-bg);
            border-color: var(--warning);
        }

        .stock-alert i {
            width: 24px;
            height: 24px;
        }

        .stock-alert.danger i { color: var(--danger); }
        .stock-alert.warning i { color: var(--warning); }

        .stock-alert-content h4 {
            font-size: 0.9rem;
            margin-bottom: 2px;
        }

        .stock-alert-content p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar .fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .progress-bar .fill.danger { background: var(--danger); }
        .progress-bar .fill.warning { background: var(--warning); }
        .progress-bar .fill.success { background: var(--success); }

        /* ═══════════════════════════════════════════════════════════
           ODONTOGRAMME (Schéma dentaire)
           ═══════════════════════════════════════════════════════════ */
        .odontogram {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 24px;
            background: var(--bg-main);
            border-radius: var(--radius-lg);
        }

        .jaw {
            display: flex;
            gap: 24px;
        }

        .jaw-section {
            display: flex;
            gap: 6px;
        }

        .tooth {
            width: 32px;
            height: 40px;
            background: white;
            border: 2px solid var(--border);
            border-radius: 4px 4px 8px 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tooth:hover {
            border-color: var(--primary);
            transform: scale(1.1);
        }

        .tooth.treated {
            background: var(--success-bg);
            border-color: var(--success);
        }

        .tooth.issue {
            background: var(--danger-bg);
            border-color: var(--danger);
        }

        .tooth.planned {
            background: var(--warning-bg);
            border-color: var(--warning);
        }

        .jaw-divider {
            width: 2px;
            background: var(--border);
        }

        .lower .tooth {
            border-radius: 8px 8px 4px 4px;
        }

        .odontogram-legend {
            display: flex;
            gap: 24px;
            font-size: 0.8rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            border: 2px solid;
        }

        .legend-color.healthy { background: white; border-color: var(--border); }
        .legend-color.treated { background: var(--success-bg); border-color: var(--success); }
        .legend-color.issue { background: var(--danger-bg); border-color: var(--danger); }
        .legend-color.planned { background: var(--warning-bg); border-color: var(--warning); }

        /* ═══════════════════════════════════════════════════════════
           MODALS
           ═══════════════════════════════════════════════════════════ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow: hidden;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-header h3 {
            font-size: 1.25rem;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border: none;
            background: var(--bg-main);
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--danger-bg);
            color: var(--danger);
        }

        .modal-body {
            padding: 24px;
            overflow-y: auto;
            max-height: calc(90vh - 160px);
        }

        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* ═══════════════════════════════════════════════════════════
           RESPONSIVE
           ═══════════════════════════════════════════════════════════ */
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .patient-profile {
                grid-template-columns: 1fr;
            }
            
            .calendar-grid {
                overflow-x: auto;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .invoice-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ═══════════════════════════════════════════════════════════
           SETTINGS / BACKOFFICE STYLES
           ═══════════════════════════════════════════════════════════ */
        .settings-nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 16px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }
        
        .settings-nav-item:hover {
            background: var(--bg-main);
            color: var(--text-primary);
        }
        
        .settings-nav-item.active {
            background: var(--primary-bg);
            color: var(--primary);
            font-weight: 500;
        }
        
        .settings-nav-item i {
            width: 18px;
            height: 18px;
        }
        
        .settings-section {
            display: none;
        }
        
        .settings-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .settings-block {
            padding: 20px 0;
            border-bottom: 1px solid var(--border-light);
        }
        
        .settings-block:last-child {
            border-bottom: none;
        }
        
        .settings-block-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .settings-actions {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        /* Roles Grid */
        .roles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }
        
        .role-card {
            padding: 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            background: var(--bg-main);
        }
        
        .role-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .role-header h4 {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .role-permissions {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 12px;
        }
        
        .permission-tag {
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 4px;
            background: var(--bg-card);
            border: 1px solid var(--border);
        }
        
        .permission-tag.granted {
            background: var(--success-bg);
            color: var(--success);
            border-color: var(--success);
        }
        
        .permission-tag.partial {
            background: var(--warning-bg);
            color: var(--warning);
            border-color: var(--warning);
        }
        
        .permission-tag.denied {
            background: var(--danger-bg);
            color: var(--danger);
            border-color: var(--danger);
        }
        
        /* Categories List */
        .categories-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .category-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            background: var(--bg-main);
            border-radius: var(--radius-sm);
        }
        
        .category-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .category-item span:first-of-type {
            flex: 1;
            font-weight: 500;
        }
        
        /* File Upload */
        .file-upload {
            border: 2px dashed var(--border);
            border-radius: var(--radius-md);
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .file-upload:hover {
            border-color: var(--primary);
            background: var(--primary-bg);
        }
        
        .file-upload i {
            width: 32px;
            height: 32px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }
        
        .file-upload span {
            display: block;
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        .file-upload input {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
        }
        
        /* Input with suffix */
        .input-with-suffix {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .input-with-suffix input {
            flex: 1;
        }
        
        .input-with-suffix span {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        /* Tarif input */
        .tarif-input {
            border: 1px solid var(--border);
            padding: 6px 10px;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            text-align: right;
        }
        
        /* Toggle switch */
        .toggle-switch {
            width: 44px;
            height: 24px;
            appearance: none;
            background: var(--border);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .toggle-switch::before {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            top: 3px;
            left: 3px;
            transition: transform 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .toggle-switch:checked {
            background: var(--primary);
        }
        
        .toggle-switch:checked::before {
            transform: translateX(20px);
        }
        
        /* Checkbox grid */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .checkbox-item input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        /* Schedule grid */
        .schedule-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .schedule-row {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .schedule-row .checkbox-item {
            min-width: 100px;
        }
        
        .schedule-row input[type="time"] {
            width: 100px;
            padding: 6px 10px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
        }
        
        .schedule-row input:disabled {
            background: var(--bg-main);
            opacity: 0.5;
        }
        
        /* Payment methods */
        .payment-methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
        }
        
        .payment-method-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .payment-method-card.active {
            border-color: var(--primary);
            background: var(--primary-bg);
        }
        
        .payment-method-card input {
            position: absolute;
            top: 8px;
            right: 8px;
        }
        
        .payment-method-card i {
            width: 32px;
            height: 32px;
            color: var(--text-secondary);
        }
        
        .payment-method-card.active i {
            color: var(--primary);
        }
        
        .payment-method-card span {
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        /* Notification toggles */
        .notification-toggles {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .notification-toggle-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-main);
            border-radius: var(--radius-md);
        }
        
        .notification-toggle-item strong {
            display: block;
            margin-bottom: 2px;
        }
        
        .notification-toggle-item p {
            font-size: 0.85rem;
        }
        
        /* Import/Export */
        .import-export-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 16px;
        }
        
        .import-card {
            padding: 20px;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            text-align: center;
        }
        
        .import-card i {
            width: 40px;
            height: 40px;
            color: var(--primary);
            margin-bottom: 12px;
        }
        
        .import-card h5 {
            font-size: 1rem;
            margin-bottom: 8px;
        }
        
        .import-card p {
            font-size: 0.85rem;
            margin-bottom: 12px;
        }
        
        /* Backup list */
        .backup-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .backup-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 16px;
            background: var(--bg-main);
            border-radius: var(--radius-md);
        }
        
        .backup-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .backup-icon.success {
            background: var(--success-bg);
            color: var(--success);
        }
        
        .backup-icon i {
            width: 20px;
            height: 20px;
        }
        
        .backup-info {
            flex: 1;
        }
        
        .backup-info strong {
            display: block;
            margin-bottom: 2px;
        }
        
        .backup-info span {
            font-size: 0.85rem;
        }
        
        .backup-actions {
            display: flex;
            gap: 8px;
        }

        /* ═══════════════════════════════════════════════════════════
           UTILITIES
           ═══════════════════════════════════════════════════════════ */
        .hidden {
            display: none !important;
        }

        .text-muted { color: var(--text-muted); }
        .text-success { color: var(--success); }
        .text-danger { color: var(--danger); }
        .text-warning { color: var(--warning); }
        .text-primary { color: var(--primary); }

        .mt-2 { margin-top: 8px; }
        .mt-4 { margin-top: 16px; }
        .mb-2 { margin-bottom: 8px; }
        .mb-4 { margin-bottom: 16px; }

        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 8px; }
        .gap-4 { gap: 16px; }

        /* ═══════════════════════════════════════════════════════════
           CAISSE STYLES
           ═══════════════════════════════════════════════════════════ */
        .caisse-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .caisse-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 20px 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
        }

        .caisse-card.highlight {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border: none;
        }

        .caisse-card.highlight .caisse-label,
        .caisse-card.highlight .caisse-amount {
            color: white !important;
        }

        .caisse-card.highlight .caisse-icon {
            background: rgba(255,255,255,0.2) !important;
            color: white !important;
        }

        .caisse-icon {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .caisse-icon i {
            width: 28px;
            height: 28px;
        }

        .caisse-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .caisse-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .caisse-amount {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .caisse-amount.success { color: var(--success); }
        .caisse-amount.danger { color: var(--danger); }
        .caisse-amount.primary { color: var(--primary); }

        /* Payment breakdown */
        .payment-breakdown {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .payment-row {
            display: grid;
            grid-template-columns: 150px 1fr 150px;
            align-items: center;
            gap: 16px;
        }

        .payment-mode {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .payment-mode i {
            width: 20px;
            height: 20px;
        }

        .payment-bar {
            height: 24px;
            background: var(--bg-main);
            border-radius: 12px;
            overflow: hidden;
        }

        .payment-progress {
            height: 100%;
            border-radius: 12px;
            transition: width 0.5s ease;
        }

        .payment-amount {
            font-weight: 600;
            text-align: right;
            color: var(--text-primary);
        }

        /* ═══════════════════════════════════════════════════════════
           ORDONNANCES & CERTIFICATS STYLES
           ═══════════════════════════════════════════════════════════ */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
        }

        .favorite-item {
            padding: 16px;
            background: var(--bg-main);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .favorite-item:hover {
            border-color: var(--primary);
            background: var(--primary-bg);
        }

        .favorite-item strong {
            display: block;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .favorite-item p {
            font-size: 0.85rem;
            margin: 0;
        }

        /* Documents types grid */
        .documents-types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .document-type-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid var(--border);
            box-shadow: var(--shadow-sm);
        }

        .document-type-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .document-icon {
            width: 64px;
            height: 64px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }

        .document-icon i {
            width: 32px;
            height: 32px;
        }

        .document-type-card h4 {
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .document-type-card p {
            font-size: 0.85rem;
            margin: 0;
        }

        /* ═══════════════════════════════════════════════════════════
           RAPPORTS & CHARTS STYLES
           ═══════════════════════════════════════════════════════════ */
        .chart-placeholder {
            padding: 20px 0;
        }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            height: 200px;
            padding: 0 10px;
        }

        .chart-bar-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .chart-bar {
            width: 100%;
            max-width: 40px;
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 4px 4px 0 0;
            min-height: 20px;
            transition: height 0.5s ease;
        }

        .chart-bar.current {
            background: linear-gradient(180deg, var(--success) 0%, #059669 100%);
        }

        .chart-bar-group span {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Donut chart */
        .donut-chart {
            width: 180px;
            height: 180px;
            margin: 0 auto 20px;
        }

        .circular-chart {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            max-height: 180px;
        }

        .circle-bg {
            fill: none;
            stroke: var(--bg-main);
            stroke-width: 3.8;
        }

        .circle {
            fill: none;
            stroke-width: 3.8;
            stroke-linecap: round;
            animation: progress 1s ease-out forwards;
        }

        @keyframes progress {
            0% { stroke-dasharray: 0, 100; }
        }

        .chart-legend {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        /* Ranking list */
        .ranking-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px;
            background: var(--bg-main);
            border-radius: var(--radius-md);
        }

        .rank {
            width: 32px;
            height: 32px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .ranking-item:nth-child(1) .rank { background: #FFD700; color: #1e293b; }
        .ranking-item:nth-child(2) .rank { background: #C0C0C0; color: #1e293b; }
        .ranking-item:nth-child(3) .rank { background: #CD7F32; color: white; }

        .ranking-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .ranking-info strong {
            font-size: 0.95rem;
        }

        .ranking-info span {
            font-size: 0.8rem;
        }

        .ranking-amount {
            font-weight: 600;
            color: var(--primary);
        }

        /* Alerts list */
        .alerts-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .alert-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            border-radius: var(--radius-md);
        }

        .alert-item i {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .alert-item div {
            flex: 1;
        }

        .alert-item strong {
            display: block;
            font-size: 0.9rem;
        }

        .alert-item p {
            margin: 4px 0 0;
            font-size: 0.8rem;
        }

        .alert-item.warning {
            background: var(--warning-bg);
        }
        .alert-item.warning i { color: var(--warning); }

        .alert-item.danger {
            background: var(--danger-bg);
        }
        .alert-item.danger i { color: var(--danger); }

        .alert-item.success {
            background: var(--success-bg);
        }
        .alert-item.success i { color: var(--success); }

        .alert-item.info {
            background: var(--info-bg);
        }
        .alert-item.info i { color: var(--info); }

        /* Stat trend neutral */
        .stat-trend.neutral {
            color: var(--text-muted);
        }

        /* Holidays grid */
        .holidays-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 8px;
        }

        .holiday-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            background: var(--bg-main);
            border-radius: var(--radius-sm);
        }

        .holiday-item input {
            width: 18px;
            height: 18px;
        }

        .holiday-date {
            font-weight: 600;
            color: var(--primary);
            min-width: 80px;
        }

        /* Emergency banner */
        .emergency-banner {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
            color: white;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            font-size: 0.85rem;
        }

        .emergency-banner a {
            color: white;
            font-weight: 600;
            text-decoration: underline;
        }

        /* Input with suffix */
        .input-with-suffix {
            display: flex;
            align-items: center;
            gap: 0;
        }

        .input-with-suffix input {
            border-radius: var(--radius-sm) 0 0 var(--radius-sm);
            border-right: none;
        }

        .input-with-suffix span {
            padding: 10px 14px;
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- ═══════════════════════════════════════════════════════════
         PANNEAU DE CONFIGURATION DÉMO (masqué en production)
         ═══════════════════════════════════════════════════════════ -->
    <div class="demo-config-bar" id="demoConfigBar" style="display: none;">
        <div class="demo-config-toggle" onclick="toggleDemoConfig()">
            <i data-lucide="settings"></i>
            <span>Configuration Démo</span>
            <i data-lucide="chevron-down" class="toggle-icon"></i>
        </div>
        <div class="demo-config-content" id="demoConfigContent">
            <div class="demo-config-grid">
                <div class="demo-config-group">
                    <label>Nom du cabinet</label>
                    <input type="text" id="configCabinetName" value="Cabinet Dentaire Dr. Diallo" onchange="updateCabinetInfo()">
                </div>
                <div class="demo-config-group">
                    <label>Nom du praticien</label>
                    <input type="text" id="configDoctorName" value="Dr. Mamadou Diallo" onchange="updateCabinetInfo()">
                </div>
                <div class="demo-config-group">
                    <label>Adresse</label>
                    <input type="text" id="configAddress" value="Avenue de la République, Kaloum" onchange="updateCabinetInfo()">
                </div>
                <div class="demo-config-group">
                    <label>Ville</label>
                    <input type="text" id="configCity" value="Conakry" onchange="updateCabinetInfo()">
                </div>
                <div class="demo-config-group">
                    <label>Téléphone</label>
                    <input type="text" id="configPhone" value="+224 621 00 00 00" onchange="updateCabinetInfo()">
                </div>
                <div class="demo-config-group">
                    <label>Devise</label>
                    <select id="configCurrency" onchange="updateCurrency()">
                        <option value="GNF" selected>🇬🇳 GNF - Franc Guinéen</option>
                        <option value="XOF">🌍 XOF - Franc CFA (BCEAO)</option>
                        <option value="XAF">🌍 XAF - Franc CFA (BEAC)</option>
                        <option value="EUR">🇪🇺 EUR - Euro</option>
                        <option value="USD">🇺🇸 USD - Dollar US</option>
                        <option value="MAD">🇲🇦 MAD - Dirham marocain</option>
                        <option value="DZD">🇩🇿 DZD - Dinar algérien</option>
                        <option value="TND">🇹🇳 TND - Dinar tunisien</option>
                    </select>
                </div>
            </div>
            <div class="demo-config-note">
                <i data-lucide="info"></i>
                Les modifications sont appliquées en temps réel dans toute l'interface
            </div>
        </div>
    </div>

    <style>
        .demo-config-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 9999;
            background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
            box-shadow: var(--shadow-lg);
            font-family: 'DM Sans', sans-serif;
        }
        
        .demo-config-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.875rem;
            transition: all 0.2s ease;
        }
        
        .demo-config-toggle:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .demo-config-toggle i {
            width: 18px;
            height: 18px;
        }
        
        .demo-config-toggle .toggle-icon {
            transition: transform 0.3s ease;
        }
        
        .demo-config-bar.open .toggle-icon {
            transform: rotate(180deg);
        }
        
        .demo-config-content {
            display: none;
            padding: 20px 24px;
            background: rgba(0,0,0,0.2);
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .demo-config-bar.open .demo-config-content {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .demo-config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .demo-config-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .demo-config-group label {
            font-size: 0.75rem;
            font-weight: 600;
            color: rgba(255,255,255,0.7);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .demo-config-group input,
        .demo-config-group select {
            padding: 10px 14px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 0.9rem;
            font-family: inherit;
            transition: all 0.2s ease;
        }
        
        .demo-config-group input:focus,
        .demo-config-group select:focus {
            outline: none;
            border-color: var(--primary-light);
            background: rgba(255,255,255,0.15);
        }
        
        .demo-config-group input::placeholder {
            color: rgba(255,255,255,0.4);
        }
        
        .demo-config-group select option {
            background: #1e293b;
            color: white;
        }
        
        .demo-config-note {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.5);
            font-size: 0.8rem;
        }
        
        .demo-config-note i {
            width: 16px;
            height: 16px;
        }
        
        /* Décaler tout le contenu pour le panneau de config (désactivé en production) */
        .app-container {
            margin-top: 0;
        }
        
        .demo-config-bar.open ~ .app-container {
            margin-top: 44px;
        }
        
        .sidebar {
            top: 0;
            height: 100vh;
        }
    </style>

    <div class="app-container">
        <!-- ═══════════════════════════════════════════════════════════
             SIDEBAR - Navigation
             ═══════════════════════════════════════════════════════════ -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="#" class="logo" onclick="showPage('dashboard'); return false;">
                    <div class="logo-icon">
                        <i data-lucide="smile"></i>
                    </div>
                    <div class="logo-text">Dental<span>Care</span></div>
                </a>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Principal</div>
                    <a class="nav-item active" data-page="dashboard">
                        <i data-lucide="layout-dashboard"></i>
                        <span>Tableau de bord</span>
                    </a>
                    <a class="nav-item" data-page="patients">
                        <i data-lucide="users"></i>
                        <span>Patients</span>
                    </a>
                    <a class="nav-item" data-page="agenda">
                        <i data-lucide="calendar-days"></i>
                        <span>Agenda</span>
                        <span class="nav-badge">5</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Facturation</div>
                    <a class="nav-item" data-page="devis">
                        <i data-lucide="file-text"></i>
                        <span>Devis</span>
                    </a>
                    <a class="nav-item" data-page="factures">
                        <i data-lucide="receipt"></i>
                        <span>Factures</span>
                        <span class="nav-badge">3</span>
                    </a>
                    <a class="nav-item" data-page="caisse">
                        <i data-lucide="wallet"></i>
                        <span>Caisse</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Médical</div>
                    <a class="nav-item" data-page="ordonnances">
                        <i data-lucide="pill"></i>
                        <span>Ordonnances</span>
                    </a>
                    <a class="nav-item" data-page="certificats">
                        <i data-lucide="file-badge"></i>
                        <span>Certificats</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Gestion</div>
                    <a class="nav-item" data-page="stock">
                        <i data-lucide="package"></i>
                        <span>Stock</span>
                    </a>
                    <a class="nav-item" data-page="rapports">
                        <i data-lucide="bar-chart-3"></i>
                        <span>Rapports</span>
                    </a>
                    <a class="nav-item" data-page="actes">
                        <i data-lucide="clipboard-list"></i>
                        <span>Catalogue actes</span>
                    </a>
                    <a class="nav-item" data-page="parametres">
                        <i data-lucide="settings"></i>
                        <span>Paramètres</span>
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-card">
                    <div class="user-avatar" id="userAvatarInitials">MD</div>
                    <div class="user-info">
                        <div class="user-name" id="sidebarDoctorName">Dr. Mamadou Diallo</div>
                        <div class="user-role">Dentiste</div>
                    </div>
                    <a href="/logout" class="logout-btn" title="Déconnexion">
                        <i data-lucide="log-out"></i>
                    </a>
                </div>
            </div>
        </aside>

        <!-- ═══════════════════════════════════════════════════════════
             MAIN CONTENT
             ═══════════════════════════════════════════════════════════ -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <h1 class="page-title" id="pageTitle">Tableau de bord</h1>
                </div>
                <div class="header-right">
                    <div class="search-bar">
                        <i data-lucide="search"></i>
                        <input type="text" id="globalSearch" placeholder="Rechercher un patient, acte..." onkeyup="handleGlobalSearch(event)">
                    </div>
                    <button class="header-btn" id="btnNotifications" onclick="openNotificationsPanel()">
                        <i data-lucide="bell"></i>
                        <span class="badge">3</span>
                    </button>
                    <button class="header-btn" id="btnMessages" onclick="openMessagesPanel()">
                        <i data-lucide="message-square"></i>
                    </button>
                </div>
            </header>

            <!-- Page Content Container -->
            <div class="page-content">
                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : DASHBOARD
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-dashboard" class="page active">
                    <!-- Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon primary">
                                <i data-lucide="calendar-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">RDV aujourd'hui</div>
                                <div class="stat-value">12</div>
                                <div class="stat-trend up">
                                    <i data-lucide="trending-up"></i>
                                    +2 vs hier
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon success">
                                <i data-lucide="users"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Patients actifs</div>
                                <div class="stat-value">1,248</div>
                                <div class="stat-trend up">
                                    <i data-lucide="trending-up"></i>
                                    +18 ce mois
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon warning">
                                <i data-lucide="banknote"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">CA du mois</div>
                                <div class="stat-value"><span class="currency-amount" data-amount="24580000">245 800 000 GNF</span></div>
                                <div class="stat-trend up">
                                    <i data-lucide="trending-up"></i>
                                    +12% vs N-1
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon danger">
                                <i data-lucide="alert-triangle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Impayés</div>
                                <div class="stat-value"><span class="currency-amount" data-amount="3240000">32 400 000 GNF</span></div>
                                <div class="stat-trend down">
                                    <i data-lucide="trending-down"></i>
                                    -8% vs mois dernier
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div>
                            <!-- Rendez-vous du jour -->
                            <div class="card appointments-today">
                                <div class="card-header">
                                    <h3 class="card-title">
                                        <i data-lucide="clock"></i>
                                        Rendez-vous du jour
                                    </h3>
                                    <button class="btn btn-secondary btn-sm" onclick="showPage('agenda')">
                                        Voir l'agenda
                                        <i data-lucide="arrow-right"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="appointment-item">
                                        <div class="appointment-time">
                                            <div class="time">09:00</div>
                                            <div class="duration">30 min</div>
                                        </div>
                                        <div class="appointment-divider"></div>
                                        <div class="appointment-details">
                                            <h4>Marie Dupont</h4>
                                            <p>Détartrage + Contrôle annuel</p>
                                        </div>
                                        <span class="badge badge-success">Confirmé</span>
                                    </div>
                                    <div class="appointment-item">
                                        <div class="appointment-time">
                                            <div class="time">09:45</div>
                                            <div class="duration">45 min</div>
                                        </div>
                                        <div class="appointment-divider"></div>
                                        <div class="appointment-details">
                                            <h4>Jean Martin</h4>
                                            <p>Extraction dent de sagesse</p>
                                        </div>
                                        <span class="badge badge-warning">En attente</span>
                                    </div>
                                    <div class="appointment-item">
                                        <div class="appointment-time">
                                            <div class="time">10:45</div>
                                            <div class="duration">60 min</div>
                                        </div>
                                        <div class="appointment-divider"></div>
                                        <div class="appointment-details">
                                            <h4>Sophie Bernard</h4>
                                            <p>Pose couronne céramique (36)</p>
                                        </div>
                                        <span class="badge badge-info">Devis validé</span>
                                    </div>
                                    <div class="appointment-item">
                                        <div class="appointment-time">
                                            <div class="time">14:00</div>
                                            <div class="duration">30 min</div>
                                        </div>
                                        <div class="appointment-divider"></div>
                                        <div class="appointment-details">
                                            <h4>Lucas Petit</h4>
                                            <p>Urgence - Douleur intense</p>
                                        </div>
                                        <span class="badge badge-danger">Urgent</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Derniers patients -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">
                                        <i data-lucide="user-plus"></i>
                                        Derniers patients enregistrés
                                    </h3>
                                </div>
                                <div class="card-body">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Patient</th>
                                                <th>Date inscription</th>
                                                <th>Téléphone</th>
                                                <th>Prochain RDV</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div class="patient-cell">
                                                        <div class="patient-avatar">EM</div>
                                                        <div class="patient-info">
                                                            <h4>Emma Moreau</h4>
                                                            <p><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f89d959599d695978a9d998db89d95999194d69b9795">[email&#160;protected]</a></p>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>06/12/2025</td>
                                                <td>06 12 34 56 78</td>
                                                <td><span class="badge badge-primary">Lun 09/12</span></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="patient-cell">
                                                        <div class="patient-avatar">TR</div>
                                                        <div class="patient-info">
                                                            <h4>Thomas Richard</h4>
                                                            <p><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="14603a667d777c756670547179757d783a777b79">[email&#160;protected]</a></p>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>05/12/2025</td>
                                                <td>06 98 76 54 32</td>
                                                <td><span class="badge badge-warning">À planifier</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div>
                            <!-- Actions rapides -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3 class="card-title">
                                        <i data-lucide="zap"></i>
                                        Actions rapides
                                    </h3>
                                </div>
                                <div class="card-body">
                                    <div class="quick-actions">
                                        <button class="quick-action" onclick="openModal('newPatient')">
                                            <i data-lucide="user-plus"></i>
                                            <span>Nouveau patient</span>
                                        </button>
                                        <button class="quick-action" onclick="openModal('newRdv')">
                                            <i data-lucide="calendar-plus"></i>
                                            <span>Nouveau RDV</span>
                                        </button>
                                        <button class="quick-action" onclick="showPage('devis')">
                                            <i data-lucide="file-plus"></i>
                                            <span>Créer un devis</span>
                                        </button>
                                        <button class="quick-action" onclick="showPage('factures')">
                                            <i data-lucide="receipt"></i>
                                            <span>Nouvelle facture</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Alertes stock -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">
                                        <i data-lucide="package"></i>
                                        Alertes stock
                                    </h3>
                                </div>
                                <div class="card-body">
                                    <div style="display: flex; flex-direction: column; gap: 16px;">
                                        <div>
                                            <div class="flex justify-between mb-2">
                                                <span style="font-size: 0.875rem;">Gants latex (M)</span>
                                                <span class="text-danger" style="font-size: 0.8rem; font-weight: 600;">5 restants</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="fill danger" style="width: 10%;"></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between mb-2">
                                                <span style="font-size: 0.875rem;">Anesthésique local</span>
                                                <span class="text-warning" style="font-size: 0.8rem; font-weight: 600;">12 restants</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="fill warning" style="width: 25%;"></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between mb-2">
                                                <span style="font-size: 0.875rem;">Composite A2</span>
                                                <span class="text-success" style="font-size: 0.8rem; font-weight: 600;">48 restants</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="fill success" style="width: 80%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : PATIENTS
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-patients" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Liste des patients</h2>
                            <p class="text-muted">1 248 patients enregistrés</p>
                        </div>
                        <button class="btn btn-primary" onclick="openModal('newPatient')">
                            <i data-lucide="user-plus"></i>
                            Nouveau patient
                        </button>
                    </div>

                    <div class="filters-bar">
                        <div class="filter-group">
                            <label>Rechercher :</label>
                            <input type="text" id="filterPatientSearch" placeholder="Nom, prénom, téléphone..." style="width: 250px;" onkeyup="filterPatients()">
                        </div>
                        <div class="filter-group">
                            <label>Statut :</label>
                            <select id="filterPatientStatus" onchange="filterPatients()">
                                <option value="">Tous</option>
                                <option value="actif">Actifs</option>
                                <option value="inactif">Inactifs</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Assurance :</label>
                            <select id="filterPatientInsurance" onchange="filterPatients()">
                                <option value="">Toutes</option>
                                <option value="MGEN">MGEN</option>
                                <option value="Harmonie">Harmonie</option>
                                <option value="AG2R">AG2R</option>
                            </select>
                        </div>
                    </div>

                    <div class="card">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Patient</th>
                                        <th>Téléphone</th>
                                        <th>Dernière visite</th>
                                        <th>Prochain RDV</th>
                                        <th>Solde</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showPage('fiche-patient')" style="cursor: pointer;">
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">MD</div>
                                                <div class="patient-info">
                                                    <h4>Marie Dupont</h4>
                                                    <p>Née le 15/03/1985 • MGEN</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td>06 12 34 56 78</td>
                                        <td>28/11/2025</td>
                                        <td><span class="badge badge-success">Aujourd'hui 09:00</span></td>
                                        <td class="text-success">0,00 €</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" title="Voir la fiche">
                                                    <i data-lucide="eye"></i>
                                                </button>
                                                <button class="btn btn-secondary btn-icon" title="Prendre RDV">
                                                    <i data-lucide="calendar-plus"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">JM</div>
                                                <div class="patient-info">
                                                    <h4>Jean Martin</h4>
                                                    <p>Né le 22/07/1972 • Harmonie</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td>06 98 76 54 32</td>
                                        <td>15/11/2025</td>
                                        <td><span class="badge badge-primary">09/12 14:30</span></td>
                                        <td class="text-danger">245,00 €</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" title="Voir la fiche">
                                                    <i data-lucide="eye"></i>
                                                </button>
                                                <button class="btn btn-secondary btn-icon" title="Prendre RDV">
                                                    <i data-lucide="calendar-plus"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">SB</div>
                                                <div class="patient-info">
                                                    <h4>Sophie Bernard</h4>
                                                    <p>Née le 08/12/1990 • AG2R</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td>07 11 22 33 44</td>
                                        <td>01/12/2025</td>
                                        <td><span class="badge badge-success">Aujourd'hui 10:45</span></td>
                                        <td class="text-success">0,00 €</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" title="Voir la fiche">
                                                    <i data-lucide="eye"></i>
                                                </button>
                                                <button class="btn btn-secondary btn-icon" title="Prendre RDV">
                                                    <i data-lucide="calendar-plus"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">LP</div>
                                                <div class="patient-info">
                                                    <h4>Lucas Petit</h4>
                                                    <p>Né le 30/01/1988 • Sans mutuelle</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td>06 55 44 33 22</td>
                                        <td>20/10/2025</td>
                                        <td><span class="badge badge-danger">Aujourd'hui 14:00</span></td>
                                        <td class="text-warning">120,00 €</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" title="Voir la fiche">
                                                    <i data-lucide="eye"></i>
                                                </button>
                                                <button class="btn btn-secondary btn-icon" title="Prendre RDV">
                                                    <i data-lucide="calendar-plus"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">CL</div>
                                                <div class="patient-info">
                                                    <h4>Claire Lefebvre</h4>
                                                    <p>Née le 14/06/1965 • MGEN</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td>06 77 88 99 00</td>
                                        <td>05/12/2025</td>
                                        <td><span class="badge badge-warning">À planifier</span></td>
                                        <td class="text-success">0,00 €</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" title="Voir la fiche">
                                                    <i data-lucide="eye"></i>
                                                </button>
                                                <button class="btn btn-secondary btn-icon" title="Prendre RDV">
                                                    <i data-lucide="calendar-plus"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : FICHE PATIENT
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-fiche-patient" class="page">
                    <div class="page-header">
                        <div class="breadcrumb">
                            <a href="#" onclick="showPage('patients')">Patients</a>
                            <i data-lucide="chevron-right"></i>
                            <span>Marie Dupont</span>
                        </div>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary">
                                <i data-lucide="printer"></i>
                                Imprimer
                            </button>
                            <button class="btn btn-primary">
                                <i data-lucide="calendar-plus"></i>
                                Prendre RDV
                            </button>
                        </div>
                    </div>

                    <div class="patient-profile">
                        <!-- Sidebar Patient -->
                        <div class="card patient-sidebar-card">
                            <div class="patient-avatar-lg">MD</div>
                            <h2>Marie Dupont</h2>
                            <p class="patient-id">Patient #P-2024-0847</p>
                            <span class="badge badge-success">Patient actif</span>
                            
                            <div class="patient-contact">
                                <div class="contact-item">
                                    <i data-lucide="phone"></i>
                                    <span>06 12 34 56 78</span>
                                </div>
                                <div class="contact-item">
                                    <i data-lucide="mail"></i>
                                    <span><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a3cec2d1cac68dc7d6d3cccdd7e3c6cec2cacf8dc0ccce">[email&#160;protected]</a></span>
                                </div>
                                <div class="contact-item">
                                    <i data-lucide="map-pin"></i>
                                    <span>12 rue des Lilas, 75015 Paris</span>
                                </div>
                                <div class="contact-item">
                                    <i data-lucide="cake"></i>
                                    <span>15/03/1985 (39 ans)</span>
                                </div>
                                <div class="contact-item">
                                    <i data-lucide="shield"></i>
                                    <span>MGEN - N° 1234567890</span>
                                </div>
                            </div>

                            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);">
                                <button class="btn btn-secondary" style="width: 100%;">
                                    <i data-lucide="edit"></i>
                                    Modifier la fiche
                                </button>
                            </div>
                        </div>

                        <!-- Contenu principal avec onglets -->
                        <div>
                            <div class="tabs">
                                <button class="tab active" data-tab="infos">Informations</button>
                                <button class="tab" data-tab="medical">Dossier médical</button>
                                <button class="tab" data-tab="rdv">Rendez-vous</button>
                                <button class="tab" data-tab="documents">Documents</button>
                                <button class="tab" data-tab="facturation">Facturation</button>
                            </div>

                            <!-- Onglet Informations -->
                            <div class="tab-content active" id="tab-infos">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">Informations personnelles</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-grid">
                                            <div class="form-group">
                                                <label>Nom</label>
                                                <input type="text" value="Dupont" readonly>
                                            </div>
                                            <div class="form-group">
                                                <label>Prénom</label>
                                                <input type="text" value="Marie" readonly>
                                            </div>
                                            <div class="form-group">
                                                <label>Date de naissance</label>
                                                <input type="text" value="15/03/1985" readonly>
                                            </div>
                                            <div class="form-group">
                                                <label>Numéro SS</label>
                                                <input type="text" value="2 85 03 75 115 234 56" readonly>
                                            </div>
                                            <div class="form-group full-width">
                                                <label>Adresse</label>
                                                <input type="text" value="12 rue des Lilas, 75015 Paris" readonly>
                                            </div>
                                            <div class="form-group">
                                                <label>Téléphone</label>
                                                <input type="text" value="06 12 34 56 78" readonly>
                                            </div>
                                            <div class="form-group">
                                                <label>Email</label>
                                                <input type="text" value="marie.dupont@email.com" readonly>
                                            </div>
                                            <div class="form-group full-width">
                                                <label>Contact d'urgence</label>
                                                <input type="text" value="Pierre Dupont (conjoint) - 06 98 76 54 32" readonly>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="card mt-4">
                                    <div class="card-header">
                                        <h3 class="card-title">Antécédents & Allergies</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-grid">
                                            <div class="form-group full-width">
                                                <label>Antécédents médicaux</label>
                                                <textarea readonly>Hypertension artérielle contrôlée sous traitement (Amlodipine 5mg). Pas de diabète.</textarea>
                                            </div>
                                            <div class="form-group full-width">
                                                <label>Allergies connues</label>
                                                <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
                                                    <span class="badge badge-danger">Pénicilline</span>
                                                    <span class="badge badge-warning">Latex (sensibilité)</span>
                                                </div>
                                            </div>
                                            <div class="form-group full-width">
                                                <label>Traitements en cours</label>
                                                <textarea readonly>Amlodipine 5mg - 1 comprimé le matin</textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Onglet Dossier médical -->
                            <div class="tab-content" id="tab-medical">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="activity"></i>
                                            Odontogramme
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="odontogram">
                                            <!-- Mâchoire supérieure -->
                                            <div class="jaw upper">
                                                <div class="jaw-section">
                                                    <div class="tooth">18</div>
                                                    <div class="tooth">17</div>
                                                    <div class="tooth treated">16</div>
                                                    <div class="tooth">15</div>
                                                    <div class="tooth">14</div>
                                                    <div class="tooth">13</div>
                                                    <div class="tooth">12</div>
                                                    <div class="tooth">11</div>
                                                </div>
                                                <div class="jaw-divider"></div>
                                                <div class="jaw-section">
                                                    <div class="tooth">21</div>
                                                    <div class="tooth">22</div>
                                                    <div class="tooth">23</div>
                                                    <div class="tooth issue">24</div>
                                                    <div class="tooth">25</div>
                                                    <div class="tooth treated">26</div>
                                                    <div class="tooth">27</div>
                                                    <div class="tooth">28</div>
                                                </div>
                                            </div>
                                            
                                            <!-- Mâchoire inférieure -->
                                            <div class="jaw lower">
                                                <div class="jaw-section">
                                                    <div class="tooth">48</div>
                                                    <div class="tooth planned">47</div>
                                                    <div class="tooth treated">46</div>
                                                    <div class="tooth">45</div>
                                                    <div class="tooth">44</div>
                                                    <div class="tooth">43</div>
                                                    <div class="tooth">42</div>
                                                    <div class="tooth">41</div>
                                                </div>
                                                <div class="jaw-divider"></div>
                                                <div class="jaw-section">
                                                    <div class="tooth">31</div>
                                                    <div class="tooth">32</div>
                                                    <div class="tooth">33</div>
                                                    <div class="tooth">34</div>
                                                    <div class="tooth">35</div>
                                                    <div class="tooth treated">36</div>
                                                    <div class="tooth">37</div>
                                                    <div class="tooth">38</div>
                                                </div>
                                            </div>
                                            
                                            <div class="odontogram-legend">
                                                <div class="legend-item">
                                                    <div class="legend-color healthy"></div>
                                                    <span>Saine</span>
                                                </div>
                                                <div class="legend-item">
                                                    <div class="legend-color treated"></div>
                                                    <span>Soignée</span>
                                                </div>
                                                <div class="legend-item">
                                                    <div class="legend-color issue"></div>
                                                    <span>À traiter</span>
                                                </div>
                                                <div class="legend-item">
                                                    <div class="legend-color planned"></div>
                                                    <span>Planifié</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="clipboard-list"></i>
                                            Historique des soins
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="timeline">
                                            <div class="timeline-item">
                                                <div class="timeline-date">28 novembre 2025</div>
                                                <div class="timeline-content">
                                                    <h4>Détartrage complet</h4>
                                                    <p>Détartrage sus et sous-gingival. État gingival satisfaisant. Rappel hygiène bucco-dentaire effectué.</p>
                                                    <p style="margin-top: 8px;"><strong>Dr. Rousseau</strong></p>
                                                </div>
                                            </div>
                                            <div class="timeline-item">
                                                <div class="timeline-date">15 octobre 2025</div>
                                                <div class="timeline-content">
                                                    <h4>Composite 36 (face occlusale)</h4>
                                                    <p>Carie débutante traitée. Composite A2. Anesthésie locale articaïne. RAS.</p>
                                                    <p style="margin-top: 8px;"><strong>Dr. Rousseau</strong></p>
                                                </div>
                                            </div>
                                            <div class="timeline-item">
                                                <div class="timeline-date">03 juin 2025</div>
                                                <div class="timeline-content">
                                                    <h4>Radio panoramique + Bilan</h4>
                                                    <p>Panoramique réalisée. Découverte carie 36. Dent 24 à surveiller (légère déminéralisation).</p>
                                                    <p style="margin-top: 8px;"><strong>Dr. Rousseau</strong></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Onglet RDV -->
                            <div class="tab-content" id="tab-rdv">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">Historique des rendez-vous</h3>
                                        <button class="btn btn-primary btn-sm">
                                            <i data-lucide="calendar-plus"></i>
                                            Nouveau RDV
                                        </button>
                                    </div>
                                    <div class="card-body">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Heure</th>
                                                    <th>Motif</th>
                                                    <th>Praticien</th>
                                                    <th>Statut</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><strong>08/12/2025</strong></td>
                                                    <td>09:00</td>
                                                    <td>Détartrage + Contrôle</td>
                                                    <td>Dr. Rousseau</td>
                                                    <td><span class="badge badge-success">Confirmé</span></td>
                                                </tr>
                                                <tr>
                                                    <td>28/11/2025</td>
                                                    <td>14:30</td>
                                                    <td>Détartrage complet</td>
                                                    <td>Dr. Rousseau</td>
                                                    <td><span class="badge badge-info">Effectué</span></td>
                                                </tr>
                                                <tr>
                                                    <td>15/10/2025</td>
                                                    <td>11:00</td>
                                                    <td>Soin carie 36</td>
                                                    <td>Dr. Rousseau</td>
                                                    <td><span class="badge badge-info">Effectué</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Onglet Documents -->
                            <div class="tab-content" id="tab-documents">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">Documents du patient</h3>
                                        <button class="btn btn-primary btn-sm">
                                            <i data-lucide="upload"></i>
                                            Ajouter un document
                                        </button>
                                    </div>
                                    <div class="card-body">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Document</th>
                                                    <th>Type</th>
                                                    <th>Date</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <div class="flex items-center gap-2">
                                                            <i data-lucide="file-image" style="color: var(--primary);"></i>
                                                            Radio_panoramique_2025.jpg
                                                        </div>
                                                    </td>
                                                    <td>Radiographie</td>
                                                    <td>03/06/2025</td>
                                                    <td>
                                                        <div class="actions-cell">
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="eye"></i></button>
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="download"></i></button>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="flex items-center gap-2">
                                                            <i data-lucide="file-text" style="color: var(--warning);"></i>
                                                            Consentement_soins.pdf
                                                        </div>
                                                    </td>
                                                    <td>Consentement</td>
                                                    <td>15/01/2024</td>
                                                    <td>
                                                        <div class="actions-cell">
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="eye"></i></button>
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="download"></i></button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Onglet Facturation -->
                            <div class="tab-content" id="tab-facturation">
                                <div class="invoice-stats" style="grid-template-columns: repeat(3, 1fr);">
                                    <div class="invoice-stat paid">
                                        <div class="amount">1 245,00 €</div>
                                        <div class="label">Total facturé</div>
                                    </div>
                                    <div class="invoice-stat paid">
                                        <div class="amount">1 245,00 €</div>
                                        <div class="label">Total réglé</div>
                                    </div>
                                    <div class="invoice-stat">
                                        <div class="amount">0,00 €</div>
                                        <div class="label">Solde dû</div>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">Factures & Devis</h3>
                                        <div class="flex gap-2">
                                            <button class="btn btn-secondary btn-sm">
                                                <i data-lucide="file-text"></i>
                                                Nouveau devis
                                            </button>
                                            <button class="btn btn-primary btn-sm">
                                                <i data-lucide="receipt"></i>
                                                Nouvelle facture
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Référence</th>
                                                    <th>Date</th>
                                                    <th>Type</th>
                                                    <th>Montant</th>
                                                    <th>Statut</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><strong>F-2025-0892</strong></td>
                                                    <td>28/11/2025</td>
                                                    <td>Facture</td>
                                                    <td>65,00 €</td>
                                                    <td><span class="badge badge-success">Réglée</span></td>
                                                    <td>
                                                        <div class="actions-cell">
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="eye"></i></button>
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="download"></i></button>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><strong>D-2025-0156</strong></td>
                                                    <td>15/10/2025</td>
                                                    <td>Devis</td>
                                                    <td>850,00 €</td>
                                                    <td><span class="badge badge-warning">En attente</span></td>
                                                    <td>
                                                        <div class="actions-cell">
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="eye"></i></button>
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="download"></i></button>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><strong>F-2025-0756</strong></td>
                                                    <td>15/10/2025</td>
                                                    <td>Facture</td>
                                                    <td>180,00 €</td>
                                                    <td><span class="badge badge-success">Réglée</span></td>
                                                    <td>
                                                        <div class="actions-cell">
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="eye"></i></button>
                                                            <button class="btn btn-secondary btn-icon"><i data-lucide="download"></i></button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : AGENDA
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-agenda" class="page">
                    <div class="agenda-header">
                        <div class="agenda-nav">
                            <button class="btn btn-secondary btn-icon">
                                <i data-lucide="chevron-left"></i>
                            </button>
                            <h2>Semaine du 8 au 14 décembre 2025</h2>
                            <button class="btn btn-secondary btn-icon">
                                <i data-lucide="chevron-right"></i>
                            </button>
                        </div>
                        <div class="flex gap-4">
                            <div class="agenda-view-toggle">
                                <button class="view-btn">Jour</button>
                                <button class="view-btn active">Semaine</button>
                                <button class="view-btn">Mois</button>
                            </div>
                            <button class="btn btn-primary" onclick="openModal('newRdv')">
                                <i data-lucide="plus"></i>
                                Nouveau RDV
                            </button>
                        </div>
                    </div>

                    <div class="calendar-grid">
                        <!-- Header -->
                        <div class="calendar-header">
                            <div></div>
                            <div>
                                <div class="day-name">Lun</div>
                                <div class="day-number">8</div>
                            </div>
                            <div class="today">
                                <div class="day-name">Mar</div>
                                <div class="day-number">9</div>
                            </div>
                            <div>
                                <div class="day-name">Mer</div>
                                <div class="day-number">10</div>
                            </div>
                            <div>
                                <div class="day-name">Jeu</div>
                                <div class="day-number">11</div>
                            </div>
                            <div>
                                <div class="day-name">Ven</div>
                                <div class="day-number">12</div>
                            </div>
                            <div>
                                <div class="day-name">Sam</div>
                                <div class="day-number">13</div>
                            </div>
                            <div>
                                <div class="day-name">Dim</div>
                                <div class="day-number">14</div>
                            </div>
                        </div>

                        <!-- 08:00 -->
                        <div class="time-slot">08:00</div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>

                        <!-- 09:00 -->
                        <div class="time-slot">09:00</div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">09:00 - 09:30</div>
                                <div class="event-patient">Marie Dupont</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event controle">
                                <div class="event-time">09:00 - 09:45</div>
                                <div class="event-patient">Pierre Morel</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">09:00 - 10:00</div>
                                <div class="event-patient">Anne Girard</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event controle">
                                <div class="event-time">09:00 - 09:30</div>
                                <div class="event-patient">Paul Roux</div>
                            </div>
                        </div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>

                        <!-- 10:00 -->
                        <div class="time-slot">10:00</div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">09:45 - 10:30</div>
                                <div class="event-patient">Jean Martin</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">10:00 - 11:00</div>
                                <div class="event-patient">Claire Blanc</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event controle">
                                <div class="event-time">10:00 - 10:30</div>
                                <div class="event-patient">Marc Leroy</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event urgence">
                                <div class="event-time">10:00 - 10:45</div>
                                <div class="event-patient">URGENCE</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>

                        <!-- 11:00 -->
                        <div class="time-slot">11:00</div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">10:45 - 11:45</div>
                                <div class="event-patient">Sophie Bernard</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">11:00 - 12:00</div>
                                <div class="event-patient">Julie Petit</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event controle">
                                <div class="event-time">11:00 - 11:30</div>
                                <div class="event-patient">Thomas Noir</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">11:00 - 12:00</div>
                                <div class="event-patient">Marie Faure</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">11:00 - 11:45</div>
                                <div class="event-patient">Louis Vidal</div>
                            </div>
                        </div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>

                        <!-- 12:00 -->
                        <div class="time-slot">12:00</div>
                        <div class="calendar-cell" style="background: var(--border-light);"></div>
                        <div class="calendar-cell" style="background: var(--border-light);"></div>
                        <div class="calendar-cell" style="background: var(--border-light);"></div>
                        <div class="calendar-cell" style="background: var(--border-light);"></div>
                        <div class="calendar-cell" style="background: var(--border-light);"></div>
                        <div class="calendar-cell" style="background: var(--border-light);"></div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>

                        <!-- 14:00 -->
                        <div class="time-slot">14:00</div>
                        <div class="calendar-cell">
                            <div class="calendar-event urgence">
                                <div class="event-time">14:00 - 14:30</div>
                                <div class="event-patient">Lucas Petit</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">14:00 - 15:00</div>
                                <div class="event-patient">Emma Duval</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">14:00 - 14:45</div>
                                <div class="event-patient">Hugo Martin</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event controle">
                                <div class="event-time">14:00 - 14:30</div>
                                <div class="event-patient">Léa Simon</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>

                        <!-- 15:00 -->
                        <div class="time-slot">15:00</div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">15:00 - 16:00</div>
                                <div class="event-patient">Nina Laurent</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">15:00 - 15:45</div>
                                <div class="event-patient">Alex Moreau</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event controle">
                                <div class="event-time">15:00 - 15:30</div>
                                <div class="event-patient">Sarah Lemaire</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">15:00 - 16:00</div>
                                <div class="event-patient">Max Dubois</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>

                        <!-- 16:00 -->
                        <div class="time-slot">16:00</div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">16:00 - 17:00</div>
                                <div class="event-patient">Chloé Robert</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event controle">
                                <div class="event-time">16:00 - 16:30</div>
                                <div class="event-patient">Tom Garcia</div>
                            </div>
                        </div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">16:00 - 17:00</div>
                                <div class="event-patient">Eva Martinez</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>

                        <!-- 17:00 -->
                        <div class="time-slot">17:00</div>
                        <div class="calendar-cell">
                            <div class="calendar-event controle">
                                <div class="event-time">17:00 - 17:30</div>
                                <div class="event-patient">Luc Bernard</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">17:00 - 18:00</div>
                                <div class="event-patient">Zoé Fontaine</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell">
                            <div class="calendar-event consultation">
                                <div class="event-time">17:00 - 17:45</div>
                                <div class="event-patient">Noa Perrin</div>
                            </div>
                        </div>
                        <div class="calendar-cell"></div>
                        <div class="calendar-cell" style="background: var(--bg-main);"></div>
                    </div>

                    <div style="display: flex; gap: 24px; margin-top: 24px; padding: 16px; background: var(--bg-card); border-radius: var(--radius-md); border: 1px solid var(--border);">
                        <div class="flex items-center gap-2">
                            <div style="width: 16px; height: 16px; background: var(--primary-bg); border-left: 3px solid var(--primary); border-radius: 2px;"></div>
                            <span style="font-size: 0.85rem;">Consultation</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div style="width: 16px; height: 16px; background: var(--success-bg); border-left: 3px solid var(--success); border-radius: 2px;"></div>
                            <span style="font-size: 0.85rem;">Contrôle</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div style="width: 16px; height: 16px; background: var(--danger-bg); border-left: 3px solid var(--danger); border-radius: 2px;"></div>
                            <span style="font-size: 0.85rem;">Urgence</span>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : DEVIS
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-devis" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Devis</h2>
                            <p class="text-muted">Gérez les plans de traitement</p>
                        </div>
                        <button class="btn btn-primary" onclick="openModal('newDevis')">
                            <i data-lucide="file-plus"></i>
                            Nouveau devis
                        </button>
                    </div>

                    <div class="invoice-stats">
                        <div class="invoice-stat">
                            <div class="amount">156</div>
                            <div class="label">Devis total</div>
                        </div>
                        <div class="invoice-stat paid">
                            <div class="amount">89</div>
                            <div class="label">Acceptés</div>
                        </div>
                        <div class="invoice-stat pending">
                            <div class="amount">42</div>
                            <div class="label">En attente</div>
                        </div>
                        <div class="invoice-stat overdue">
                            <div class="amount">25</div>
                            <div class="label">Expirés</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Liste des devis</h3>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Référence</th>
                                        <th>Patient</th>
                                        <th>Date</th>
                                        <th>Montant</th>
                                        <th>Validité</th>
                                        <th>Statut</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>D-2025-0189</strong></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">JD</div>
                                                <div class="patient-info">
                                                    <h4>Jacques Durand</h4>
                                                </div>
                                            </div>
                                        </td>
                                        <td>05/12/2025</td>
                                        <td><strong>2 450,00 €</strong></td>
                                        <td>05/03/2026</td>
                                        <td><span class="badge badge-warning">En attente</span></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" onclick="viewDevis('D-2025-0189')" title="Voir"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon" onclick="sendDevis('D-2025-0189')" title="Envoyer"><i data-lucide="send"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>D-2025-0188</strong></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">MF</div>
                                                <div class="patient-info">
                                                    <h4>Martine Fournier</h4>
                                                </div>
                                            </div>
                                        </td>
                                        <td>03/12/2025</td>
                                        <td><strong>580,00 €</strong></td>
                                        <td>03/03/2026</td>
                                        <td><span class="badge badge-success">Accepté</span></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" onclick="viewDevis('D-2025-0188')" title="Voir"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-primary btn-icon" onclick="convertDevisToFacture('D-2025-0188')" title="Convertir en facture"><i data-lucide="receipt"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>D-2025-0187</strong></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">PL</div>
                                                <div class="patient-info">
                                                    <h4>Philippe Lambert</h4>
                                                </div>
                                            </div>
                                        </td>
                                        <td>01/12/2025</td>
                                        <td><strong>1 200,00 €</strong></td>
                                        <td>01/03/2026</td>
                                        <td><span class="badge badge-warning">En attente</span></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" onclick="viewDevis('D-2025-0187')" title="Voir"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon" onclick="sendDevis('D-2025-0187')" title="Envoyer"><i data-lucide="send"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : FACTURES
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-factures" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Factures</h2>
                            <p class="text-muted">Suivi de la facturation</p>
                        </div>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary" onclick="exportFacturesCSV()">
                                <i data-lucide="download"></i>
                                Export CSV
                            </button>
                            <button class="btn btn-primary" onclick="openModal('newFacture')">
                                <i data-lucide="receipt"></i>
                                Nouvelle facture
                            </button>
                        </div>
                    </div>

                    <div class="invoice-stats">
                        <div class="invoice-stat">
                            <div class="amount">24 580 €</div>
                            <div class="label">CA du mois</div>
                        </div>
                        <div class="invoice-stat paid">
                            <div class="amount">21 340 €</div>
                            <div class="label">Encaissé</div>
                        </div>
                        <div class="invoice-stat pending">
                            <div class="amount">2 140 €</div>
                            <div class="label">En attente</div>
                        </div>
                        <div class="invoice-stat overdue">
                            <div class="amount">1 100 €</div>
                            <div class="label">En retard</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Factures récentes</h3>
                            <div class="filter-group">
                                <select id="filterFactureStatus" onchange="filterFactures()">
                                    <option value="">Toutes les factures</option>
                                    <option value="reglee">Réglées</option>
                                    <option value="attente">En attente</option>
                                    <option value="retard">En retard</option>
                                </select>
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>N° Facture</th>
                                        <th>Patient</th>
                                        <th>Date</th>
                                        <th>Montant</th>
                                        <th>Réglé</th>
                                        <th>Reste dû</th>
                                        <th>Statut</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>F-2025-0923</strong></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">MD</div>
                                                <div class="patient-info">
                                                    <h4>Marie Dupont</h4>
                                                </div>
                                            </div>
                                        </td>
                                        <td>06/12/2025</td>
                                        <td>185,00 €</td>
                                        <td>185,00 €</td>
                                        <td class="text-success">0,00 €</td>
                                        <td><span class="badge badge-success">Réglée</span></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" onclick="viewFacture('F-2025-0923')" title="Voir"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon" onclick="downloadFacture('F-2025-0923')" title="Télécharger"><i data-lucide="download"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>F-2025-0922</strong></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">JM</div>
                                                <div class="patient-info">
                                                    <h4>Jean Martin</h4>
                                                </div>
                                            </div>
                                        </td>
                                        <td>05/12/2025</td>
                                        <td>450,00 €</td>
                                        <td>200,00 €</td>
                                        <td class="text-warning">250,00 €</td>
                                        <td><span class="badge badge-warning">Partiel</span></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" onclick="viewFacture('F-2025-0922')" title="Voir"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-primary btn-icon" onclick="openModal('newEncaissement'); document.getElementById('encaissementRef').value='F-2025-0922';" title="Encaisser"><i data-lucide="credit-card"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>F-2025-0918</strong></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">AR</div>
                                                <div class="patient-info">
                                                    <h4>Alain Roussel</h4>
                                                </div>
                                            </div>
                                        </td>
                                        <td>28/11/2025</td>
                                        <td>320,00 €</td>
                                        <td>0,00 €</td>
                                        <td class="text-danger">320,00 €</td>
                                        <td><span class="badge badge-danger">Impayée</span></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon" onclick="viewFacture('F-2025-0918')" title="Voir"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon" onclick="sendRappelFacture('F-2025-0918')" title="Envoyer rappel"><i data-lucide="send"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : STOCK
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-stock" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Gestion du stock</h2>
                            <p class="text-muted">Consommables et matériel</p>
                        </div>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary">
                                <i data-lucide="package-plus"></i>
                                Entrée stock
                            </button>
                            <button class="btn btn-primary">
                                <i data-lucide="plus"></i>
                                Nouveau produit
                            </button>
                        </div>
                    </div>

                    <div class="stock-alerts">
                        <div class="stock-alert danger">
                            <i data-lucide="alert-circle"></i>
                            <div class="stock-alert-content">
                                <h4>Stock critique</h4>
                                <p>3 produits en rupture imminente</p>
                            </div>
                            <button class="btn btn-danger btn-sm">Voir</button>
                        </div>
                        <div class="stock-alert warning">
                            <i data-lucide="alert-triangle"></i>
                            <div class="stock-alert-content">
                                <h4>Stock bas</h4>
                                <p>5 produits sous le seuil d'alerte</p>
                            </div>
                            <button class="btn btn-secondary btn-sm">Voir</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Inventaire</h3>
                            <div class="filter-group">
                                <input type="text" placeholder="Rechercher un produit..." style="width: 250px;">
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Référence</th>
                                        <th>Produit</th>
                                        <th>Catégorie</th>
                                        <th>Stock actuel</th>
                                        <th>Seuil alerte</th>
                                        <th>Statut</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>GLT-M-001</code></td>
                                        <td><strong>Gants latex taille M</strong></td>
                                        <td>Protection</td>
                                        <td>
                                            <strong class="text-danger">5</strong>
                                            <div class="progress-bar mt-2" style="width: 100px;">
                                                <div class="fill danger" style="width: 10%;"></div>
                                            </div>
                                        </td>
                                        <td>50</td>
                                        <td><span class="badge badge-danger">Critique</span></td>
                                        <td>
                                            <button class="btn btn-primary btn-sm">Commander</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>ANE-ART-001</code></td>
                                        <td><strong>Anesthésique Articaïne</strong></td>
                                        <td>Médicaments</td>
                                        <td>
                                            <strong class="text-warning">12</strong>
                                            <div class="progress-bar mt-2" style="width: 100px;">
                                                <div class="fill warning" style="width: 25%;"></div>
                                            </div>
                                        </td>
                                        <td>30</td>
                                        <td><span class="badge badge-warning">Bas</span></td>
                                        <td>
                                            <button class="btn btn-secondary btn-sm">Commander</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>CMP-A2-001</code></td>
                                        <td><strong>Composite A2</strong></td>
                                        <td>Restauration</td>
                                        <td>
                                            <strong class="text-success">48</strong>
                                            <div class="progress-bar mt-2" style="width: 100px;">
                                                <div class="fill success" style="width: 80%;"></div>
                                            </div>
                                        </td>
                                        <td>20</td>
                                        <td><span class="badge badge-success">OK</span></td>
                                        <td>
                                            <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>MSQ-FFP2-001</code></td>
                                        <td><strong>Masques FFP2</strong></td>
                                        <td>Protection</td>
                                        <td>
                                            <strong class="text-success">200</strong>
                                            <div class="progress-bar mt-2" style="width: 100px;">
                                                <div class="fill success" style="width: 100%;"></div>
                                            </div>
                                        </td>
                                        <td>50</td>
                                        <td><span class="badge badge-success">OK</span></td>
                                        <td>
                                            <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>FRS-DIA-001</code></td>
                                        <td><strong>Fraises diamantées</strong></td>
                                        <td>Instruments</td>
                                        <td>
                                            <strong class="text-warning">8</strong>
                                            <div class="progress-bar mt-2" style="width: 100px;">
                                                <div class="fill warning" style="width: 20%;"></div>
                                            </div>
                                        </td>
                                        <td>15</td>
                                        <td><span class="badge badge-warning">Bas</span></td>
                                        <td>
                                            <button class="btn btn-secondary btn-sm">Commander</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : CATALOGUE ACTES
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-actes" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Catalogue des actes</h2>
                            <p class="text-muted">Nomenclature et tarification</p>
                        </div>
                        <button class="btn btn-primary">
                            <i data-lucide="plus"></i>
                            Nouvel acte
                        </button>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Liste des actes</h3>
                            <div class="filter-group">
                                <select>
                                    <option>Toutes les catégories</option>
                                    <option>Soins conservateurs</option>
                                    <option>Chirurgie</option>
                                    <option>Prothèses</option>
                                    <option>Orthodontie</option>
                                </select>
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Libellé</th>
                                        <th>Catégorie</th>
                                        <th>Durée</th>
                                        <th>Tarif</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>SC01</code></td>
                                        <td><strong>Détartrage complet</strong></td>
                                        <td><span class="badge badge-primary">Soins conservateurs</span></td>
                                        <td>30 min</td>
                                        <td><strong>65,00 €</strong></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>SC02</code></td>
                                        <td><strong>Composite 1 face</strong></td>
                                        <td><span class="badge badge-primary">Soins conservateurs</span></td>
                                        <td>30 min</td>
                                        <td><strong>80,00 €</strong></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>CH01</code></td>
                                        <td><strong>Extraction simple</strong></td>
                                        <td><span class="badge badge-danger">Chirurgie</span></td>
                                        <td>30 min</td>
                                        <td><strong>120,00 €</strong></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>CH02</code></td>
                                        <td><strong>Extraction dent de sagesse</strong></td>
                                        <td><span class="badge badge-danger">Chirurgie</span></td>
                                        <td>45 min</td>
                                        <td><strong>180,00 €</strong></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>PR01</code></td>
                                        <td><strong>Couronne céramique</strong></td>
                                        <td><span class="badge badge-info">Prothèses</span></td>
                                        <td>60 min</td>
                                        <td><strong>650,00 €</strong></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><code>PR02</code></td>
                                        <td><strong>Implant dentaire</strong></td>
                                        <td><span class="badge badge-info">Prothèses</span></td>
                                        <td>90 min</td>
                                        <td><strong>1 200,00 €</strong></td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : PARAMÈTRES - BACKOFFICE COMPLET
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-parametres" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Paramètres</h2>
                            <p class="text-muted">Configuration complète du cabinet</p>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 280px 1fr; gap: 24px;">
                        <!-- Menu paramètres -->
                        <div class="card" style="height: fit-content; position: sticky; top: 90px;">
                            <div class="card-body" style="padding: 8px;">
                                <div style="padding: 8px 12px; font-size: 0.7rem; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Général</div>
                                <div class="settings-nav-item active" data-settings="cabinet" onclick="showSettingsSection('cabinet')">
                                    <i data-lucide="building-2"></i>
                                    <span>Informations cabinet</span>
                                </div>
                                <div class="settings-nav-item" data-settings="users" onclick="showSettingsSection('users')">
                                    <i data-lucide="users"></i>
                                    <span>Utilisateurs</span>
                                </div>
                                <div class="settings-nav-item" data-settings="roles" onclick="showSettingsSection('roles')">
                                    <i data-lucide="shield"></i>
                                    <span>Rôles & permissions</span>
                                </div>
                                
                                <div style="padding: 8px 12px; margin-top: 16px; font-size: 0.7rem; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Métier</div>
                                <div class="settings-nav-item" data-settings="actes" onclick="showSettingsSection('actes')">
                                    <i data-lucide="stethoscope"></i>
                                    <span>Catalogue des actes</span>
                                </div>
                                <div class="settings-nav-item" data-settings="stock" onclick="showSettingsSection('stock')">
                                    <i data-lucide="package"></i>
                                    <span>Stock & Achats</span>
                                </div>
                                <div class="settings-nav-item" data-settings="patients" onclick="showSettingsSection('patients')">
                                    <i data-lucide="user-cog"></i>
                                    <span>Patients & Mutuelles</span>
                                </div>
                                <div class="settings-nav-item" data-settings="rdv" onclick="showSettingsSection('rdv')">
                                    <i data-lucide="calendar-cog"></i>
                                    <span>Rendez-vous</span>
                                </div>
                                
                                <div style="padding: 8px 12px; margin-top: 16px; font-size: 0.7rem; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Finance</div>
                                <div class="settings-nav-item" data-settings="facturation" onclick="showSettingsSection('facturation')">
                                    <i data-lucide="receipt"></i>
                                    <span>Facturation</span>
                                </div>
                                <div class="settings-nav-item" data-settings="paiements" onclick="showSettingsSection('paiements')">
                                    <i data-lucide="credit-card"></i>
                                    <span>Modes de paiement</span>
                                </div>
                                
                                <div style="padding: 8px 12px; margin-top: 16px; font-size: 0.7rem; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Système</div>
                                <div class="settings-nav-item" data-settings="notifications" onclick="showSettingsSection('notifications')">
                                    <i data-lucide="bell"></i>
                                    <span>Notifications</span>
                                </div>
                                <div class="settings-nav-item" data-settings="import" onclick="showSettingsSection('import')">
                                    <i data-lucide="upload"></i>
                                    <span>Import / Export</span>
                                </div>
                                <div class="settings-nav-item" data-settings="backup" onclick="showSettingsSection('backup')">
                                    <i data-lucide="database"></i>
                                    <span>Sauvegardes</span>
                                </div>
                            </div>
                        </div>

                        <!-- Contenu paramètres -->
                        <div class="settings-content">
                            
                            <!-- SECTION: Informations cabinet -->
                            <div id="settings-cabinet" class="settings-section active">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="building-2"></i>
                                            Informations du cabinet
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Identité</h4>
                                            <div class="form-grid">
                                                <div class="form-group full-width">
                                                    <label>Nom du cabinet</label>
                                                    <input type="text" id="settingsCabinetName" value="Cabinet Dentaire Dr. Diallo">
                                                </div>
                                                <div class="form-group">
                                                    <label>Logo</label>
                                                    <div class="file-upload">
                                                        <i data-lucide="image"></i>
                                                        <span>Glissez une image ou cliquez</span>
                                                        <input type="file" accept="image/*">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label>Couleur principale</label>
                                                    <div style="display: flex; gap: 8px; align-items: center;">
                                                        <input type="color" value="#0891b2" style="width: 50px; height: 38px; border: none; border-radius: 6px; cursor: pointer;">
                                                        <input type="text" value="#0891b2" style="flex: 1;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Coordonnées</h4>
                                            <div class="form-grid">
                                                <div class="form-group full-width">
                                                    <label>Adresse</label>
                                                    <input type="text" id="settingsAddress" value="Avenue de la République, Kaloum">
                                                </div>
                                                <div class="form-group">
                                                    <label>Code postal</label>
                                                    <input type="text" value="">
                                                </div>
                                                <div class="form-group">
                                                    <label>Ville</label>
                                                    <input type="text" id="settingsCity" value="Conakry">
                                                </div>
                                                <div class="form-group">
                                                    <label>Pays</label>
                                                    <select>
                                                        <option value="GN" selected>Guinée</option>
                                                        <option value="SN">Sénégal</option>
                                                        <option value="CI">Côte d'Ivoire</option>
                                                        <option value="ML">Mali</option>
                                                        <option value="FR">France</option>
                                                        <option value="MA">Maroc</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Téléphone principal</label>
                                                    <input type="text" id="settingsPhone" value="+224 621 00 00 00">
                                                </div>
                                                <div class="form-group">
                                                    <label>Téléphone secondaire</label>
                                                    <input type="text" value="">
                                                </div>
                                                <div class="form-group">
                                                    <label>Email</label>
                                                    <input type="email" value="contact@cabinet-diallo.gn">
                                                </div>
                                                <div class="form-group">
                                                    <label>Site web</label>
                                                    <input type="url" placeholder="https://">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Informations légales</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>N° Registre Commerce (RCCM)</label>
                                                    <input type="text" value="GN-RCCM-2024-B-12345">
                                                </div>
                                                <div class="form-group">
                                                    <label>NIF (Numéro d'Identification Fiscale)</label>
                                                    <input type="text" value="">
                                                </div>
                                                <div class="form-group">
                                                    <label>N° Ordre des Médecins</label>
                                                    <input type="text" value="OMG-DEN-2024-0456">
                                                </div>
                                                <div class="form-group">
                                                    <label>N° Autorisation sanitaire</label>
                                                    <input type="text" value="">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Régionalisation</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Devise</label>
                                                    <select id="settingsCurrency">
                                                        <option value="GNF" selected>🇬🇳 GNF - Franc Guinéen</option>
                                                        <option value="XOF">🌍 XOF - Franc CFA (BCEAO)</option>
                                                        <option value="XAF">🌍 XAF - Franc CFA (BEAC)</option>
                                                        <option value="EUR">🇪🇺 EUR - Euro</option>
                                                        <option value="USD">🇺🇸 USD - Dollar US</option>
                                                        <option value="MAD">🇲🇦 MAD - Dirham marocain</option>
                                                        <option value="DZD">🇩🇿 DZD - Dinar algérien</option>
                                                        <option value="TND">🇹🇳 TND - Dinar tunisien</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Format de date</label>
                                                    <select>
                                                        <option value="DD/MM/YYYY" selected>DD/MM/YYYY (31/12/2025)</option>
                                                        <option value="MM/DD/YYYY">MM/DD/YYYY (12/31/2025)</option>
                                                        <option value="YYYY-MM-DD">YYYY-MM-DD (2025-12-31)</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Langue</label>
                                                    <select>
                                                        <option value="fr" selected>Français</option>
                                                        <option value="en">English</option>
                                                        <option value="ar">العربية</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Fuseau horaire</label>
                                                    <select>
                                                        <option value="Africa/Conakry" selected>Africa/Conakry (GMT+0)</option>
                                                        <option value="Africa/Dakar">Africa/Dakar (GMT+0)</option>
                                                        <option value="Africa/Abidjan">Africa/Abidjan (GMT+0)</option>
                                                        <option value="Africa/Casablanca">Africa/Casablanca (GMT+1)</option>
                                                        <option value="Europe/Paris">Europe/Paris (GMT+1)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-actions">
                                            <button class="btn btn-secondary">Annuler</button>
                                            <button class="btn btn-primary" onclick="saveSettings()">
                                                <i data-lucide="save"></i>
                                                Enregistrer
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Utilisateurs -->
                            <div id="settings-users" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="users"></i>
                                            Gestion des utilisateurs
                                        </h3>
                                        <button class="btn btn-primary btn-sm">
                                            <i data-lucide="user-plus"></i>
                                            Nouvel utilisateur
                                        </button>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-container">
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th>Utilisateur</th>
                                                        <th>Email</th>
                                                        <th>Rôle</th>
                                                        <th>Statut</th>
                                                        <th>Dernière connexion</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                                <div class="avatar">MD</div>
                                                                <div>
                                                                    <strong>Dr. Mamadou Diallo</strong>
                                                                    <div class="text-muted" style="font-size: 0.8rem;">Praticien principal</div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="284c5a064c4149444447684b494a41464d5c064f46">[email&#160;protected]</a></td>
                                                        <td><span class="badge badge-primary">Administrateur</span></td>
                                                        <td><span class="badge badge-success">Actif</span></td>
                                                        <td>Aujourd'hui, 08:30</td>
                                                        <td>
                                                            <div class="actions-cell">
                                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                                <div class="avatar" style="background: var(--success);">FK</div>
                                                                <div>
                                                                    <strong>Fatoumata Keita</strong>
                                                                    <div class="text-muted" style="font-size: 0.8rem;">Assistante</div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7c1a52171915081d3c1f1d1e15121908521b12">[email&#160;protected]</a></td>
                                                        <td><span class="badge badge-info">Assistante</span></td>
                                                        <td><span class="badge badge-success">Actif</span></td>
                                                        <td>Aujourd'hui, 07:45</td>
                                                        <td>
                                                            <div class="actions-cell">
                                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                                                <button class="btn btn-secondary btn-icon"><i data-lucide="trash-2"></i></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                                <div class="avatar" style="background: var(--warning);">AB</div>
                                                                <div>
                                                                    <strong>Aissatou Barry</strong>
                                                                    <div class="text-muted" style="font-size: 0.8rem;">Secrétaire</div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="61004f030013131821020003080f04154f060f">[email&#160;protected]</a></td>
                                                        <td><span class="badge badge-warning">Secrétaire</span></td>
                                                        <td><span class="badge badge-success">Actif</span></td>
                                                        <td>Hier, 18:00</td>
                                                        <td>
                                                            <div class="actions-cell">
                                                                <button class="btn btn-secondary btn-icon"><i data-lucide="edit"></i></button>
                                                                <button class="btn btn-secondary btn-icon"><i data-lucide="trash-2"></i></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Rôles & Permissions -->
                            <div id="settings-roles" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="shield"></i>
                                            Rôles & permissions
                                        </h3>
                                        <button class="btn btn-primary btn-sm">
                                            <i data-lucide="plus"></i>
                                            Nouveau rôle
                                        </button>
                                    </div>
                                    <div class="card-body">
                                        <div class="roles-grid">
                                            <div class="role-card">
                                                <div class="role-header">
                                                    <h4>Administrateur</h4>
                                                    <span class="badge badge-primary">Système</span>
                                                </div>
                                                <p class="text-muted">Accès complet à toutes les fonctionnalités</p>
                                                <div class="role-permissions">
                                                    <span class="permission-tag granted">Tout voir</span>
                                                    <span class="permission-tag granted">Tout modifier</span>
                                                    <span class="permission-tag granted">Supprimer</span>
                                                    <span class="permission-tag granted">Paramètres</span>
                                                </div>
                                            </div>
                                            <div class="role-card">
                                                <div class="role-header">
                                                    <h4>Dentiste</h4>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <p class="text-muted">Praticien avec accès aux dossiers médicaux</p>
                                                <div class="role-permissions">
                                                    <span class="permission-tag granted">Patients</span>
                                                    <span class="permission-tag granted">RDV</span>
                                                    <span class="permission-tag granted">Soins</span>
                                                    <span class="permission-tag granted">Devis</span>
                                                    <span class="permission-tag partial">Factures (lecture)</span>
                                                </div>
                                            </div>
                                            <div class="role-card">
                                                <div class="role-header">
                                                    <h4>Assistante</h4>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <p class="text-muted">Aide aux soins et gestion planning</p>
                                                <div class="role-permissions">
                                                    <span class="permission-tag partial">Patients (lecture)</span>
                                                    <span class="permission-tag granted">RDV</span>
                                                    <span class="permission-tag partial">Soins (lecture)</span>
                                                    <span class="permission-tag granted">Stock</span>
                                                </div>
                                            </div>
                                            <div class="role-card">
                                                <div class="role-header">
                                                    <h4>Secrétaire</h4>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <p class="text-muted">Accueil et gestion administrative</p>
                                                <div class="role-permissions">
                                                    <span class="permission-tag granted">Patients</span>
                                                    <span class="permission-tag granted">RDV</span>
                                                    <span class="permission-tag granted">Devis</span>
                                                    <span class="permission-tag granted">Factures</span>
                                                    <span class="permission-tag denied">Soins</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Catalogue des actes -->
                            <div id="settings-actes" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="stethoscope"></i>
                                            Catalogue des actes & Tarifs
                                        </h3>
                                        <div style="display: flex; gap: 8px;">
                                            <button class="btn btn-secondary btn-sm">
                                                <i data-lucide="folder-plus"></i>
                                                Nouvelle catégorie
                                            </button>
                                            <button class="btn btn-primary btn-sm">
                                                <i data-lucide="plus"></i>
                                                Nouvel acte
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Catégories d'actes</h4>
                                            <div class="categories-list">
                                                <div class="category-item">
                                                    <div class="category-color" style="background: var(--primary);"></div>
                                                    <span>Prévention</span>
                                                    <span class="text-muted">4 actes</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <div class="category-item">
                                                    <div class="category-color" style="background: var(--info);"></div>
                                                    <span>Soins conservateurs</span>
                                                    <span class="text-muted">8 actes</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <div class="category-item">
                                                    <div class="category-color" style="background: var(--warning);"></div>
                                                    <span>Chirurgie</span>
                                                    <span class="text-muted">6 actes</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <div class="category-item">
                                                    <div class="category-color" style="background: var(--success);"></div>
                                                    <span>Prothèses</span>
                                                    <span class="text-muted">12 actes</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <div class="category-item">
                                                    <div class="category-color" style="background: var(--danger);"></div>
                                                    <span>Implantologie</span>
                                                    <span class="text-muted">5 actes</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Liste des actes</h4>
                                            <div class="table-container">
                                                <table>
                                                    <thead>
                                                        <tr>
                                                            <th>Code</th>
                                                            <th>Libellé</th>
                                                            <th>Catégorie</th>
                                                            <th>Durée</th>
                                                            <th>Tarif</th>
                                                            <th>Actif</th>
                                                            <th>Actions</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td><code>SC01</code></td>
                                                            <td><strong>Détartrage complet</strong></td>
                                                            <td><span class="badge badge-primary">Prévention</span></td>
                                                            <td>30 min</td>
                                                            <td><input type="text" class="tarif-input" value="650 000" style="width: 100px;"> GNF</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><code>SC02</code></td>
                                                            <td><strong>Composite 1 face</strong></td>
                                                            <td><span class="badge badge-info">Soins conservateurs</span></td>
                                                            <td>30 min</td>
                                                            <td><input type="text" class="tarif-input" value="800 000" style="width: 100px;"> GNF</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><code>CH01</code></td>
                                                            <td><strong>Extraction simple</strong></td>
                                                            <td><span class="badge badge-warning">Chirurgie</span></td>
                                                            <td>30 min</td>
                                                            <td><input type="text" class="tarif-input" value="1 200 000" style="width: 100px;"> GNF</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><code>PR01</code></td>
                                                            <td><strong>Couronne céramique</strong></td>
                                                            <td><span class="badge badge-success">Prothèses</span></td>
                                                            <td>60 min</td>
                                                            <td><input type="text" class="tarif-input" value="6 500 000" style="width: 100px;"> GNF</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><code>IMP01</code></td>
                                                            <td><strong>Implant dentaire</strong></td>
                                                            <td><span class="badge badge-danger">Implantologie</span></td>
                                                            <td>90 min</td>
                                                            <td><input type="text" class="tarif-input" value="12 000 000" style="width: 100px;"> GNF</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-actions">
                                            <button class="btn btn-secondary">Annuler les modifications</button>
                                            <button class="btn btn-primary">
                                                <i data-lucide="save"></i>
                                                Enregistrer les tarifs
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Stock & Achats -->
                            <div id="settings-stock" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="package"></i>
                                            Paramètres Stock & Achats
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Seuils d'alerte par défaut</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Seuil d'alerte (% du stock max)</label>
                                                    <div class="input-with-suffix">
                                                        <input type="number" value="20">
                                                        <span>%</span>
                                                    </div>
                                                    <small class="text-muted">Notification quand le stock passe sous ce seuil</small>
                                                </div>
                                                <div class="form-group">
                                                    <label>Seuil critique (% du stock max)</label>
                                                    <div class="input-with-suffix">
                                                        <input type="number" value="10">
                                                        <span>%</span>
                                                    </div>
                                                    <small class="text-muted">Alerte urgente</small>
                                                </div>
                                                <div class="form-group">
                                                    <label>Alerte péremption (jours avant)</label>
                                                    <div class="input-with-suffix">
                                                        <input type="number" value="30">
                                                        <span>jours</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Catégories de produits</h4>
                                            <div class="categories-list">
                                                <div class="category-item">
                                                    <span>Consommables</span>
                                                    <span class="text-muted">15 produits</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <div class="category-item">
                                                    <span>Anesthésiques</span>
                                                    <span class="text-muted">8 produits</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <div class="category-item">
                                                    <span>Matériaux</span>
                                                    <span class="text-muted">22 produits</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                                <div class="category-item">
                                                    <span>Hygiène & Stérilisation</span>
                                                    <span class="text-muted">12 produits</span>
                                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                </div>
                                            </div>
                                            <button class="btn btn-secondary btn-sm" style="margin-top: 12px;">
                                                <i data-lucide="plus"></i>
                                                Ajouter une catégorie
                                            </button>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Fournisseurs</h4>
                                            <div class="table-container">
                                                <table>
                                                    <thead>
                                                        <tr>
                                                            <th>Fournisseur</th>
                                                            <th>Contact</th>
                                                            <th>Téléphone</th>
                                                            <th>Email</th>
                                                            <th>Actions</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td><strong>MediDental Guinée</strong></td>
                                                            <td>M. Camara</td>
                                                            <td>+224 622 11 22 33</td>
                                                            <td><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f4979b9a80959780b49991909d90919a809598da939a">[email&#160;protected]</a></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><strong>DentaPro Afrique</strong></td>
                                                            <td>Mme Sow</td>
                                                            <td>+224 623 44 55 66</td>
                                                            <td><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bad9d5d7d7dbd4dedfc9fadedfd4cedbcac8d594d9d5d7">[email&#160;protected]</a></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <button class="btn btn-secondary btn-sm" style="margin-top: 12px;">
                                                <i data-lucide="plus"></i>
                                                Ajouter un fournisseur
                                            </button>
                                        </div>
                                        
                                        <div class="settings-actions">
                                            <button class="btn btn-secondary">Annuler</button>
                                            <button class="btn btn-primary">
                                                <i data-lucide="save"></i>
                                                Enregistrer
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Patients & Mutuelles -->
                            <div id="settings-patients" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="user-cog"></i>
                                            Patients & Mutuelles
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Champs obligatoires pour les patients</h4>
                                            <div class="checkbox-grid">
                                                <label class="checkbox-item">
                                                    <input type="checkbox" checked disabled>
                                                    <span>Nom</span>
                                                </label>
                                                <label class="checkbox-item">
                                                    <input type="checkbox" checked disabled>
                                                    <span>Prénom</span>
                                                </label>
                                                <label class="checkbox-item">
                                                    <input type="checkbox" checked>
                                                    <span>Date de naissance</span>
                                                </label>
                                                <label class="checkbox-item">
                                                    <input type="checkbox" checked>
                                                    <span>Téléphone</span>
                                                </label>
                                                <label class="checkbox-item">
                                                    <input type="checkbox">
                                                    <span>Email</span>
                                                </label>
                                                <label class="checkbox-item">
                                                    <input type="checkbox">
                                                    <span>Adresse</span>
                                                </label>
                                                <label class="checkbox-item">
                                                    <input type="checkbox">
                                                    <span>N° Sécurité sociale</span>
                                                </label>
                                                <label class="checkbox-item">
                                                    <input type="checkbox">
                                                    <span>Contact d'urgence</span>
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Mutuelles / Assurances</h4>
                                            <div class="table-container">
                                                <table>
                                                    <thead>
                                                        <tr>
                                                            <th>Nom</th>
                                                            <th>Taux remboursement</th>
                                                            <th>Contact</th>
                                                            <th>Actif</th>
                                                            <th>Actions</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td><strong>NSIA Assurances</strong></td>
                                                            <td>80%</td>
                                                            <td>+224 621 00 00 01</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><strong>SOGUIPAH</strong></td>
                                                            <td>70%</td>
                                                            <td>+224 621 00 00 02</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><strong>Mutuelle des Fonctionnaires</strong></td>
                                                            <td>100%</td>
                                                            <td>+224 621 00 00 03</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td>
                                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <button class="btn btn-secondary btn-sm" style="margin-top: 12px;">
                                                <i data-lucide="plus"></i>
                                                Ajouter une mutuelle
                                            </button>
                                        </div>
                                        
                                        <div class="settings-actions">
                                            <button class="btn btn-secondary">Annuler</button>
                                            <button class="btn btn-primary">
                                                <i data-lucide="save"></i>
                                                Enregistrer
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Rendez-vous -->
                            <div id="settings-rdv" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="calendar-cog"></i>
                                            Configuration des rendez-vous
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Horaires du cabinet</h4>
                                            <div class="schedule-grid">
                                                <div class="schedule-row">
                                                    <label class="checkbox-item">
                                                        <input type="checkbox" checked>
                                                        <span>Lundi</span>
                                                    </label>
                                                    <input type="time" value="08:00">
                                                    <span>à</span>
                                                    <input type="time" value="18:00">
                                                    <span class="text-muted">Pause:</span>
                                                    <input type="time" value="12:00">
                                                    <span>-</span>
                                                    <input type="time" value="14:00">
                                                </div>
                                                <div class="schedule-row">
                                                    <label class="checkbox-item">
                                                        <input type="checkbox" checked>
                                                        <span>Mardi</span>
                                                    </label>
                                                    <input type="time" value="08:00">
                                                    <span>à</span>
                                                    <input type="time" value="18:00">
                                                    <span class="text-muted">Pause:</span>
                                                    <input type="time" value="12:00">
                                                    <span>-</span>
                                                    <input type="time" value="14:00">
                                                </div>
                                                <div class="schedule-row">
                                                    <label class="checkbox-item">
                                                        <input type="checkbox" checked>
                                                        <span>Mercredi</span>
                                                    </label>
                                                    <input type="time" value="08:00">
                                                    <span>à</span>
                                                    <input type="time" value="18:00">
                                                    <span class="text-muted">Pause:</span>
                                                    <input type="time" value="12:00">
                                                    <span>-</span>
                                                    <input type="time" value="14:00">
                                                </div>
                                                <div class="schedule-row">
                                                    <label class="checkbox-item">
                                                        <input type="checkbox" checked>
                                                        <span>Jeudi</span>
                                                    </label>
                                                    <input type="time" value="08:00">
                                                    <span>à</span>
                                                    <input type="time" value="18:00">
                                                    <span class="text-muted">Pause:</span>
                                                    <input type="time" value="12:00">
                                                    <span>-</span>
                                                    <input type="time" value="14:00">
                                                </div>
                                                <div class="schedule-row">
                                                    <label class="checkbox-item">
                                                        <input type="checkbox" checked>
                                                        <span>Vendredi</span>
                                                    </label>
                                                    <input type="time" value="08:00">
                                                    <span>à</span>
                                                    <input type="time" value="17:00">
                                                    <span class="text-muted">Pause:</span>
                                                    <input type="time" value="12:00">
                                                    <span>-</span>
                                                    <input type="time" value="14:00">
                                                </div>
                                                <div class="schedule-row">
                                                    <label class="checkbox-item">
                                                        <input type="checkbox">
                                                        <span>Samedi</span>
                                                    </label>
                                                    <input type="time" value="09:00" disabled>
                                                    <span>à</span>
                                                    <input type="time" value="13:00" disabled>
                                                    <span class="text-muted">Pause:</span>
                                                    <input type="time" disabled>
                                                    <span>-</span>
                                                    <input type="time" disabled>
                                                </div>
                                                <div class="schedule-row">
                                                    <label class="checkbox-item">
                                                        <input type="checkbox">
                                                        <span>Dimanche</span>
                                                    </label>
                                                    <input type="time" disabled>
                                                    <span>à</span>
                                                    <input type="time" disabled>
                                                    <span class="text-muted">Pause:</span>
                                                    <input type="time" disabled>
                                                    <span>-</span>
                                                    <input type="time" disabled>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Types de rendez-vous</h4>
                                            <div class="table-container">
                                                <table>
                                                    <thead>
                                                        <tr>
                                                            <th>Type</th>
                                                            <th>Couleur</th>
                                                            <th>Durée par défaut</th>
                                                            <th>Actif</th>
                                                            <th>Actions</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td><strong>Consultation</strong></td>
                                                            <td><input type="color" value="#0891b2" style="width: 40px; height: 30px; border: none; border-radius: 4px;"></td>
                                                            <td><input type="number" value="30" style="width: 60px;"> min</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td><button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button></td>
                                                        </tr>
                                                        <tr>
                                                            <td><strong>Contrôle</strong></td>
                                                            <td><input type="color" value="#10b981" style="width: 40px; height: 30px; border: none; border-radius: 4px;"></td>
                                                            <td><input type="number" value="20" style="width: 60px;"> min</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td><button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button></td>
                                                        </tr>
                                                        <tr>
                                                            <td><strong>Soin</strong></td>
                                                            <td><input type="color" value="#6366f1" style="width: 40px; height: 30px; border: none; border-radius: 4px;"></td>
                                                            <td><input type="number" value="45" style="width: 60px;"> min</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td><button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button></td>
                                                        </tr>
                                                        <tr>
                                                            <td><strong>Urgence</strong></td>
                                                            <td><input type="color" value="#ef4444" style="width: 40px; height: 30px; border: none; border-radius: 4px;"></td>
                                                            <td><input type="number" value="30" style="width: 60px;"> min</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td><button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button></td>
                                                        </tr>
                                                        <tr>
                                                            <td><strong>Chirurgie</strong></td>
                                                            <td><input type="color" value="#f59e0b" style="width: 40px; height: 30px; border: none; border-radius: 4px;"></td>
                                                            <td><input type="number" value="90" style="width: 60px;"> min</td>
                                                            <td><input type="checkbox" checked class="toggle-switch"></td>
                                                            <td><button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <button class="btn btn-secondary btn-sm" style="margin-top: 12px;">
                                                <i data-lucide="plus"></i>
                                                Ajouter un type
                                            </button>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Rappels automatiques</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Rappel par SMS</label>
                                                    <select>
                                                        <option value="24">24h avant</option>
                                                        <option value="48" selected>48h avant</option>
                                                        <option value="72">72h avant</option>
                                                        <option value="0">Désactivé</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Rappel par Email</label>
                                                    <select>
                                                        <option value="24" selected>24h avant</option>
                                                        <option value="48">48h avant</option>
                                                        <option value="72">72h avant</option>
                                                        <option value="0">Désactivé</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Délai min. annulation (heures)</label>
                                                    <input type="number" value="24">
                                                    <small class="text-muted">Le patient peut annuler jusqu'à X heures avant</small>
                                                </div>
                                                <div class="form-group">
                                                    <label>Intervalle créneaux (minutes)</label>
                                                    <select>
                                                        <option value="10">10 min</option>
                                                        <option value="15" selected>15 min</option>
                                                        <option value="20">20 min</option>
                                                        <option value="30">30 min</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Jours fériés - Guinée 2025</h4>
                                            <p class="text-muted" style="margin-bottom: 12px;">Le cabinet sera automatiquement marqué fermé ces jours-là</p>
                                            <div class="holidays-grid">
                                                <div class="holiday-item">
                                                    <input type="checkbox" checked>
                                                    <span class="holiday-date">1er janvier</span>
                                                    <span>Jour de l'An</span>
                                                </div>
                                                <div class="holiday-item">
                                                    <input type="checkbox" checked>
                                                    <span class="holiday-date">~30 mars</span>
                                                    <span>Aïd el-Fitr (fin Ramadan)</span>
                                                </div>
                                                <div class="holiday-item">
                                                    <input type="checkbox" checked>
                                                    <span class="holiday-date">1er mai</span>
                                                    <span>Fête du Travail</span>
                                                </div>
                                                <div class="holiday-item">
                                                    <input type="checkbox" checked>
                                                    <span class="holiday-date">~6 juin</span>
                                                    <span>Aïd el-Adha (Tabaski)</span>
                                                </div>
                                                <div class="holiday-item">
                                                    <input type="checkbox" checked>
                                                    <span class="holiday-date">15 août</span>
                                                    <span>Assomption</span>
                                                </div>
                                                <div class="holiday-item">
                                                    <input type="checkbox" checked>
                                                    <span class="holiday-date">~5 sept</span>
                                                    <span>Mawlid (Maouloud)</span>
                                                </div>
                                                <div class="holiday-item">
                                                    <input type="checkbox" checked>
                                                    <span class="holiday-date">2 octobre</span>
                                                    <span>Fête de l'Indépendance</span>
                                                </div>
                                                <div class="holiday-item">
                                                    <input type="checkbox" checked>
                                                    <span class="holiday-date">25 décembre</span>
                                                    <span>Noël</span>
                                                </div>
                                            </div>
                                            <button class="btn btn-secondary btn-sm" style="margin-top: 12px;">
                                                <i data-lucide="plus"></i>
                                                Ajouter une fermeture exceptionnelle
                                            </button>
                                        </div>
                                        
                                        <div class="settings-actions">
                                            <button class="btn btn-secondary">Annuler</button>
                                            <button class="btn btn-primary">
                                                <i data-lucide="save"></i>
                                                Enregistrer
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Facturation -->
                            <div id="settings-facturation" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="receipt"></i>
                                            Paramètres de facturation
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Numérotation</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Préfixe factures</label>
                                                    <input type="text" value="F">
                                                    <small class="text-muted">Ex: F-2025-0001</small>
                                                </div>
                                                <div class="form-group">
                                                    <label>Préfixe devis</label>
                                                    <input type="text" value="D">
                                                    <small class="text-muted">Ex: D-2025-0001</small>
                                                </div>
                                                <div class="form-group">
                                                    <label>Préfixe avoirs</label>
                                                    <input type="text" value="AV">
                                                    <small class="text-muted">Ex: AV-2025-0001</small>
                                                </div>
                                                <div class="form-group">
                                                    <label>Prochain n° facture</label>
                                                    <input type="number" value="127">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Délais & Échéances</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Validité des devis (jours)</label>
                                                    <input type="number" value="90">
                                                </div>
                                                <div class="form-group">
                                                    <label>Échéance factures (jours)</label>
                                                    <input type="number" value="30">
                                                </div>
                                                <div class="form-group">
                                                    <label>Délai relance impayés (jours)</label>
                                                    <input type="number" value="15">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">TVA</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Assujetti à la TVA</label>
                                                    <select id="tvaEnabled">
                                                        <option value="no" selected>Non (exonéré - actes médicaux)</option>
                                                        <option value="yes">Oui</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Taux de TVA par défaut</label>
                                                    <div class="input-with-suffix">
                                                        <input type="number" value="18" disabled>
                                                        <span>%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Mentions légales sur les documents</h4>
                                            <div class="form-group full-width">
                                                <label>Conditions de paiement</label>
                                                <textarea style="min-height: 80px;">Paiement à réception de la facture. En cas de retard de paiement, des pénalités de 10% seront appliquées.</textarea>
                                            </div>
                                            <div class="form-group full-width">
                                                <label>Mentions légales en pied de facture</label>
                                                <textarea style="min-height: 80px;">Cabinet Dentaire Dr. Diallo - RCCM: GN-RCCM-2024-B-12345 - Ordre des Médecins: OMG-DEN-2024-0456</textarea>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-actions">
                                            <button class="btn btn-secondary">Annuler</button>
                                            <button class="btn btn-primary">
                                                <i data-lucide="save"></i>
                                                Enregistrer
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Modes de paiement -->
                            <div id="settings-paiements" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="credit-card"></i>
                                            Modes de paiement
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Modes de paiement acceptés</h4>
                                            <div class="payment-methods-grid">
                                                <div class="payment-method-card active">
                                                    <input type="checkbox" checked>
                                                    <i data-lucide="banknote"></i>
                                                    <span>Espèces</span>
                                                </div>
                                                <div class="payment-method-card active">
                                                    <input type="checkbox" checked>
                                                    <i data-lucide="credit-card"></i>
                                                    <span>Carte bancaire</span>
                                                </div>
                                                <div class="payment-method-card active">
                                                    <input type="checkbox" checked>
                                                    <i data-lucide="smartphone"></i>
                                                    <span>Mobile Money</span>
                                                </div>
                                                <div class="payment-method-card">
                                                    <input type="checkbox">
                                                    <i data-lucide="receipt"></i>
                                                    <span>Chèque</span>
                                                </div>
                                                <div class="payment-method-card active">
                                                    <input type="checkbox" checked>
                                                    <i data-lucide="arrow-right-left"></i>
                                                    <span>Virement</span>
                                                </div>
                                                <div class="payment-method-card">
                                                    <input type="checkbox">
                                                    <i data-lucide="shield-check"></i>
                                                    <span>Tiers payant</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Configuration Mobile Money</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Orange Money - Numéro marchand</label>
                                                    <input type="text" placeholder="+224 6XX XX XX XX">
                                                </div>
                                                <div class="form-group">
                                                    <label>MTN Mobile Money - Numéro marchand</label>
                                                    <input type="text" placeholder="+224 6XX XX XX XX">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Coordonnées bancaires (pour virements)</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Banque</label>
                                                    <input type="text" value="Société Générale Guinée">
                                                </div>
                                                <div class="form-group">
                                                    <label>Numéro de compte</label>
                                                    <input type="text" placeholder="XXXX XXXX XXXX">
                                                </div>
                                                <div class="form-group full-width">
                                                    <label>IBAN (si applicable)</label>
                                                    <input type="text" placeholder="">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-actions">
                                            <button class="btn btn-secondary">Annuler</button>
                                            <button class="btn btn-primary">
                                                <i data-lucide="save"></i>
                                                Enregistrer
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Notifications -->
                            <div id="settings-notifications" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="bell"></i>
                                            Notifications
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Configuration SMS</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Fournisseur SMS</label>
                                                    <select>
                                                        <option value="orange">Orange SMS Pro</option>
                                                        <option value="twilio">Twilio</option>
                                                        <option value="nexmo">Vonage (Nexmo)</option>
                                                        <option value="africas">Africa's Talking</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Clé API</label>
                                                    <input type="password" placeholder="••••••••••••">
                                                </div>
                                                <div class="form-group">
                                                    <label>Nom expéditeur</label>
                                                    <input type="text" value="CabinetDiallo" maxlength="11">
                                                    <small class="text-muted">Max 11 caractères, sans espaces</small>
                                                </div>
                                                <div class="form-group">
                                                    <label>Crédit SMS restant</label>
                                                    <div style="display: flex; align-items: center; gap: 12px;">
                                                        <span style="font-size: 1.5rem; font-weight: 600; color: var(--success);">2,450</span>
                                                        <button class="btn btn-secondary btn-sm">Recharger</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Configuration Email</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Serveur SMTP</label>
                                                    <input type="text" value="smtp.gmail.com">
                                                </div>
                                                <div class="form-group">
                                                    <label>Port</label>
                                                    <input type="number" value="587">
                                                </div>
                                                <div class="form-group">
                                                    <label>Email d'envoi</label>
                                                    <input type="email" value="noreply@cabinet-diallo.gn">
                                                </div>
                                                <div class="form-group">
                                                    <label>Mot de passe</label>
                                                    <input type="password" placeholder="••••••••••••">
                                                </div>
                                            </div>
                                            <button class="btn btn-secondary btn-sm" style="margin-top: 12px;">
                                                <i data-lucide="send"></i>
                                                Envoyer un email test
                                            </button>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Alertes système</h4>
                                            <div class="notification-toggles">
                                                <div class="notification-toggle-item">
                                                    <div>
                                                        <strong>Stock bas</strong>
                                                        <p class="text-muted">Notification quand un produit passe sous le seuil</p>
                                                    </div>
                                                    <input type="checkbox" checked class="toggle-switch">
                                                </div>
                                                <div class="notification-toggle-item">
                                                    <div>
                                                        <strong>Impayés</strong>
                                                        <p class="text-muted">Alerte pour les factures en retard</p>
                                                    </div>
                                                    <input type="checkbox" checked class="toggle-switch">
                                                </div>
                                                <div class="notification-toggle-item">
                                                    <div>
                                                        <strong>RDV annulés</strong>
                                                        <p class="text-muted">Notification immédiate en cas d'annulation</p>
                                                    </div>
                                                    <input type="checkbox" checked class="toggle-switch">
                                                </div>
                                                <div class="notification-toggle-item">
                                                    <div>
                                                        <strong>Nouveaux patients</strong>
                                                        <p class="text-muted">Email récapitulatif quotidien</p>
                                                    </div>
                                                    <input type="checkbox" class="toggle-switch">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-actions">
                                            <button class="btn btn-secondary">Annuler</button>
                                            <button class="btn btn-primary">
                                                <i data-lucide="save"></i>
                                                Enregistrer
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Import / Export -->
                            <div id="settings-import" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="upload"></i>
                                            Import / Export de données
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Importer des données</h4>
                                            <div class="import-export-grid">
                                                <div class="import-card">
                                                    <i data-lucide="users"></i>
                                                    <h5>Patients</h5>
                                                    <p class="text-muted">Importer une liste de patients (CSV, Excel)</p>
                                                    <button class="btn btn-secondary btn-sm">
                                                        <i data-lucide="upload"></i>
                                                        Importer
                                                    </button>
                                                    <a href="#" class="text-muted" style="font-size: 0.8rem;">Télécharger le modèle</a>
                                                </div>
                                                <div class="import-card">
                                                    <i data-lucide="stethoscope"></i>
                                                    <h5>Catalogue actes</h5>
                                                    <p class="text-muted">Importer un catalogue de tarifs</p>
                                                    <button class="btn btn-secondary btn-sm">
                                                        <i data-lucide="upload"></i>
                                                        Importer
                                                    </button>
                                                    <a href="#" class="text-muted" style="font-size: 0.8rem;">Télécharger le modèle</a>
                                                </div>
                                                <div class="import-card">
                                                    <i data-lucide="package"></i>
                                                    <h5>Stock</h5>
                                                    <p class="text-muted">Importer l'inventaire</p>
                                                    <button class="btn btn-secondary btn-sm">
                                                        <i data-lucide="upload"></i>
                                                        Importer
                                                    </button>
                                                    <a href="#" class="text-muted" style="font-size: 0.8rem;">Télécharger le modèle</a>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Exporter des données</h4>
                                            <div class="import-export-grid">
                                                <div class="import-card">
                                                    <i data-lucide="users"></i>
                                                    <h5>Patients</h5>
                                                    <p class="text-muted">Exporter la liste des patients</p>
                                                    <div style="display: flex; gap: 8px;">
                                                        <button class="btn btn-secondary btn-sm">CSV</button>
                                                        <button class="btn btn-secondary btn-sm">Excel</button>
                                                    </div>
                                                </div>
                                                <div class="import-card">
                                                    <i data-lucide="receipt"></i>
                                                    <h5>Factures</h5>
                                                    <p class="text-muted">Exporter les factures</p>
                                                    <div style="display: flex; gap: 8px;">
                                                        <button class="btn btn-secondary btn-sm">CSV</button>
                                                        <button class="btn btn-secondary btn-sm">Excel</button>
                                                    </div>
                                                </div>
                                                <div class="import-card">
                                                    <i data-lucide="bar-chart-3"></i>
                                                    <h5>Statistiques</h5>
                                                    <p class="text-muted">Rapport d'activité complet</p>
                                                    <div style="display: flex; gap: 8px;">
                                                        <button class="btn btn-secondary btn-sm">PDF</button>
                                                        <button class="btn btn-secondary btn-sm">Excel</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SECTION: Sauvegardes -->
                            <div id="settings-backup" class="settings-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">
                                            <i data-lucide="database"></i>
                                            Sauvegardes
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Sauvegarde automatique</h4>
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label>Fréquence</label>
                                                    <select>
                                                        <option value="daily" selected>Quotidienne</option>
                                                        <option value="weekly">Hebdomadaire</option>
                                                        <option value="monthly">Mensuelle</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Heure de sauvegarde</label>
                                                    <input type="time" value="02:00">
                                                </div>
                                                <div class="form-group">
                                                    <label>Conservation (jours)</label>
                                                    <input type="number" value="30">
                                                </div>
                                                <div class="form-group">
                                                    <label>Stockage cloud</label>
                                                    <select>
                                                        <option value="local">Local uniquement</option>
                                                        <option value="google" selected>Google Drive</option>
                                                        <option value="dropbox">Dropbox</option>
                                                        <option value="s3">Amazon S3</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="settings-block">
                                            <h4 class="settings-block-title">Dernières sauvegardes</h4>
                                            <div class="backup-list">
                                                <div class="backup-item">
                                                    <div class="backup-icon success">
                                                        <i data-lucide="check-circle"></i>
                                                    </div>
                                                    <div class="backup-info">
                                                        <strong>backup_2025-12-08_02-00.zip</strong>
                                                        <span class="text-muted">Aujourd'hui à 02:00 • 245 MB • Google Drive</span>
                                                    </div>
                                                    <div class="backup-actions">
                                                        <button class="btn btn-secondary btn-sm">
                                                            <i data-lucide="download"></i>
                                                        </button>
                                                        <button class="btn btn-secondary btn-sm">
                                                            <i data-lucide="rotate-ccw"></i>
                                                            Restaurer
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="backup-item">
                                                    <div class="backup-icon success">
                                                        <i data-lucide="check-circle"></i>
                                                    </div>
                                                    <div class="backup-info">
                                                        <strong>backup_2025-12-07_02-00.zip</strong>
                                                        <span class="text-muted">Hier à 02:00 • 243 MB • Google Drive</span>
                                                    </div>
                                                    <div class="backup-actions">
                                                        <button class="btn btn-secondary btn-sm">
                                                            <i data-lucide="download"></i>
                                                        </button>
                                                        <button class="btn btn-secondary btn-sm">
                                                            <i data-lucide="rotate-ccw"></i>
                                                            Restaurer
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="backup-item">
                                                    <div class="backup-icon success">
                                                        <i data-lucide="check-circle"></i>
                                                    </div>
                                                    <div class="backup-info">
                                                        <strong>backup_2025-12-06_02-00.zip</strong>
                                                        <span class="text-muted">06/12 à 02:00 • 241 MB • Google Drive</span>
                                                    </div>
                                                    <div class="backup-actions">
                                                        <button class="btn btn-secondary btn-sm">
                                                            <i data-lucide="download"></i>
                                                        </button>
                                                        <button class="btn btn-secondary btn-sm">
                                                            <i data-lucide="rotate-ccw"></i>
                                                            Restaurer
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div style="display: flex; gap: 12px; margin-top: 24px;">
                                            <button class="btn btn-primary">
                                                <i data-lucide="hard-drive-download"></i>
                                                Lancer une sauvegarde maintenant
                                            </button>
                                            <button class="btn btn-secondary">
                                                <i data-lucide="upload"></i>
                                                Restaurer depuis un fichier
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : CAISSE
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-caisse" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Caisse du jour</h2>
                            <p class="text-muted" id="caisseDate">Lundi 8 décembre 2025</p>
                        </div>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary" onclick="printZCaisse()">
                                <i data-lucide="printer"></i>
                                Imprimer Z de caisse
                            </button>
                            <button class="btn btn-primary" onclick="openModal('newEncaissement')">
                                <i data-lucide="plus-circle"></i>
                                Nouvel encaissement
                            </button>
                        </div>
                    </div>

                    <!-- Résumé caisse -->
                    <div class="caisse-summary">
                        <div class="caisse-card">
                            <div class="caisse-icon" style="background: var(--success-bg); color: var(--success);">
                                <i data-lucide="trending-up"></i>
                            </div>
                            <div class="caisse-info">
                                <span class="caisse-label">Encaissements du jour</span>
                                <span class="caisse-amount success">4 850 000 GNF</span>
                            </div>
                        </div>
                        <div class="caisse-card">
                            <div class="caisse-icon" style="background: var(--danger-bg); color: var(--danger);">
                                <i data-lucide="trending-down"></i>
                            </div>
                            <div class="caisse-info">
                                <span class="caisse-label">Décaissements</span>
                                <span class="caisse-amount danger">350 000 GNF</span>
                            </div>
                        </div>
                        <div class="caisse-card highlight">
                            <div class="caisse-icon" style="background: var(--primary-bg); color: var(--primary);">
                                <i data-lucide="wallet"></i>
                            </div>
                            <div class="caisse-info">
                                <span class="caisse-label">Solde de caisse</span>
                                <span class="caisse-amount primary">4 500 000 GNF</span>
                            </div>
                        </div>
                    </div>

                    <!-- Ventilation par mode de paiement -->
                    <div class="card" style="margin-bottom: 24px;">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i data-lucide="pie-chart"></i>
                                Ventilation par mode de paiement
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="payment-breakdown">
                                <div class="payment-row">
                                    <div class="payment-mode">
                                        <i data-lucide="banknote"></i>
                                        <span>Espèces</span>
                                    </div>
                                    <div class="payment-bar">
                                        <div class="payment-progress" style="width: 45%; background: var(--success);"></div>
                                    </div>
                                    <span class="payment-amount">2 182 500 GNF</span>
                                </div>
                                <div class="payment-row">
                                    <div class="payment-mode">
                                        <i data-lucide="smartphone"></i>
                                        <span>Orange Money</span>
                                    </div>
                                    <div class="payment-bar">
                                        <div class="payment-progress" style="width: 30%; background: #ff6600;"></div>
                                    </div>
                                    <span class="payment-amount">1 455 000 GNF</span>
                                </div>
                                <div class="payment-row">
                                    <div class="payment-mode">
                                        <i data-lucide="smartphone"></i>
                                        <span>MTN MoMo</span>
                                    </div>
                                    <div class="payment-bar">
                                        <div class="payment-progress" style="width: 15%; background: #ffcc00;"></div>
                                    </div>
                                    <span class="payment-amount">727 500 GNF</span>
                                </div>
                                <div class="payment-row">
                                    <div class="payment-mode">
                                        <i data-lucide="credit-card"></i>
                                        <span>Carte bancaire</span>
                                    </div>
                                    <div class="payment-bar">
                                        <div class="payment-progress" style="width: 10%; background: var(--info);"></div>
                                    </div>
                                    <span class="payment-amount">485 000 GNF</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mouvements du jour -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Mouvements du jour</h3>
                            <div class="filter-group">
                                <select id="filterCaisseMouvement" onchange="filterCaisseMouvements()">
                                    <option value="">Tous les mouvements</option>
                                    <option value="encaissement">Encaissements</option>
                                    <option value="decaissement">Décaissements</option>
                                </select>
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Heure</th>
                                        <th>Type</th>
                                        <th>Référence</th>
                                        <th>Patient / Motif</th>
                                        <th>Mode</th>
                                        <th>Montant</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>16:45</td>
                                        <td><span class="badge badge-success">Encaissement</span></td>
                                        <td>F-2025-0127</td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">AS</div>
                                                <span>Amadou Sow</span>
                                            </div>
                                        </td>
                                        <td><i data-lucide="smartphone" style="width: 16px; color: #ff6600;"></i> Orange Money</td>
                                        <td style="color: var(--success); font-weight: 600;">+1 200 000 GNF</td>
                                        <td>
                                            <button class="btn btn-secondary btn-icon btn-sm" onclick="printMouvement('F-2025-0127')"><i data-lucide="printer"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>15:30</td>
                                        <td><span class="badge badge-success">Encaissement</span></td>
                                        <td>F-2025-0126</td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">FC</div>
                                                <span>Fatoumata Camara</span>
                                            </div>
                                        </td>
                                        <td><i data-lucide="banknote" style="width: 16px; color: var(--success);"></i> Espèces</td>
                                        <td style="color: var(--success); font-weight: 600;">+650 000 GNF</td>
                                        <td>
                                            <button class="btn btn-secondary btn-icon btn-sm" onclick="printMouvement('F-2025-0126')"><i data-lucide="printer"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>14:15</td>
                                        <td><span class="badge badge-danger">Décaissement</span></td>
                                        <td>DEC-0045</td>
                                        <td>Achat consommables - MediDental</td>
                                        <td><i data-lucide="banknote" style="width: 16px; color: var(--success);"></i> Espèces</td>
                                        <td style="color: var(--danger); font-weight: 600;">-350 000 GNF</td>
                                        <td>
                                            <button class="btn btn-secondary btn-icon btn-sm" onclick="printMouvement('DEC-0045')"><i data-lucide="printer"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>11:00</td>
                                        <td><span class="badge badge-success">Encaissement</span></td>
                                        <td>F-2025-0125</td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">MB</div>
                                                <span>Mamadou Barry</span>
                                            </div>
                                        </td>
                                        <td><i data-lucide="smartphone" style="width: 16px; color: #ffcc00;"></i> MTN MoMo</td>
                                        <td style="color: var(--success); font-weight: 600;">+800 000 GNF</td>
                                        <td>
                                            <button class="btn btn-secondary btn-icon btn-sm" onclick="printMouvement('F-2025-0125')"><i data-lucide="printer"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>09:30</td>
                                        <td><span class="badge badge-success">Encaissement</span></td>
                                        <td>F-2025-0124</td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">KD</div>
                                                <span>Kadiatou Diallo</span>
                                            </div>
                                        </td>
                                        <td><i data-lucide="banknote" style="width: 16px; color: var(--success);"></i> Espèces</td>
                                        <td style="color: var(--success); font-weight: 600;">+2 200 000 GNF</td>
                                        <td>
                                            <button class="btn btn-secondary btn-icon btn-sm" onclick="printMouvement('F-2025-0124')"><i data-lucide="printer"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : ORDONNANCES
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-ordonnances" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Ordonnances</h2>
                            <p class="text-muted">Prescriptions médicales</p>
                        </div>
                        <div class="flex gap-2">
                            <button class="btn btn-primary" onclick="openModal('newOrdonnance')">
                                <i data-lucide="file-plus"></i>
                                Nouvelle ordonnance
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Ordonnances récentes</h3>
                            <div class="flex gap-2">
                                <input type="text" placeholder="Rechercher un patient..." style="width: 250px;">
                                <input type="date" style="width: 150px;">
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>N°</th>
                                        <th>Date</th>
                                        <th>Patient</th>
                                        <th>Médicaments</th>
                                        <th>Praticien</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>ORD-2025-0089</strong></td>
                                        <td>08/12/2025</td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">AS</div>
                                                <span>Amadou Sow</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="badge badge-info">Amoxicilline 500mg</span>
                                            <span class="badge badge-info">Doliprane 1000mg</span>
                                        </td>
                                        <td>Dr. Diallo</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="printer"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="copy"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>ORD-2025-0088</strong></td>
                                        <td>07/12/2025</td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">FC</div>
                                                <span>Fatoumata Camara</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="badge badge-info">Métronidazole 500mg</span>
                                            <span class="badge badge-info">Ibuprofène 400mg</span>
                                        </td>
                                        <td>Dr. Diallo</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="printer"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="copy"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>ORD-2025-0087</strong></td>
                                        <td>06/12/2025</td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">OB</div>
                                                <span>Ousmane Bah</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="badge badge-info">Augmentin 1g</span>
                                            <span class="badge badge-warning">Tramadol 50mg</span>
                                        </td>
                                        <td>Dr. Diallo</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="printer"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="copy"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Médicaments fréquents -->
                    <div class="card" style="margin-top: 24px;">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i data-lucide="star"></i>
                                Prescriptions favorites
                            </h3>
                            <button class="btn btn-secondary btn-sm">
                                <i data-lucide="plus"></i>
                                Ajouter
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="favorites-grid">
                                <div class="favorite-item" onclick="alert('Prescription ajoutée à l\'ordonnance')">
                                    <strong>Post-extraction</strong>
                                    <p class="text-muted">Amoxicilline 500mg + Doliprane 1000mg</p>
                                </div>
                                <div class="favorite-item" onclick="alert('Prescription ajoutée à l\'ordonnance')">
                                    <strong>Infection dentaire</strong>
                                    <p class="text-muted">Augmentin 1g + Ibuprofène 400mg</p>
                                </div>
                                <div class="favorite-item" onclick="alert('Prescription ajoutée à l\'ordonnance')">
                                    <strong>Douleur post-op</strong>
                                    <p class="text-muted">Tramadol 50mg + Doliprane 1000mg</p>
                                </div>
                                <div class="favorite-item" onclick="alert('Prescription ajoutée à l\'ordonnance')">
                                    <strong>Bain de bouche</strong>
                                    <p class="text-muted">Chlorhexidine 0.12% + Paracétamol</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : CERTIFICATS
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-certificats" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Certificats médicaux</h2>
                            <p class="text-muted">Documents officiels</p>
                        </div>
                        <div class="flex gap-2">
                            <button class="btn btn-primary" onclick="openModal('newCertificat')">
                                <i data-lucide="file-plus"></i>
                                Nouveau certificat
                            </button>
                        </div>
                    </div>

                    <!-- Types de documents -->
                    <div class="documents-types-grid">
                        <div class="document-type-card" onclick="openModal('newCertificat')">
                            <div class="document-icon" style="background: var(--primary-bg); color: var(--primary);">
                                <i data-lucide="file-text"></i>
                            </div>
                            <h4>Certificat médical</h4>
                            <p class="text-muted">Attestation d'aptitude ou d'inaptitude</p>
                        </div>
                        <div class="document-type-card" onclick="openModal('newCertificat')">
                            <div class="document-icon" style="background: var(--success-bg); color: var(--success);">
                                <i data-lucide="briefcase"></i>
                            </div>
                            <h4>Arrêt de travail</h4>
                            <p class="text-muted">Certificat d'incapacité temporaire</p>
                        </div>
                        <div class="document-type-card" onclick="openModal('newCertificat')">
                            <div class="document-icon" style="background: var(--warning-bg); color: var(--warning);">
                                <i data-lucide="clipboard-check"></i>
                            </div>
                            <h4>Attestation de soins</h4>
                            <p class="text-muted">Pour remboursement assurance</p>
                        </div>
                        <div class="document-type-card" onclick="openModal('newCertificat')">
                            <div class="document-icon" style="background: var(--info-bg); color: var(--info);">
                                <i data-lucide="heart-pulse"></i>
                            </div>
                            <h4>Certificat d'aptitude</h4>
                            <p class="text-muted">Aptitude sportive, permis, etc.</p>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 24px;">
                        <div class="card-header">
                            <h3 class="card-title">Certificats récents</h3>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>N°</th>
                                        <th>Date</th>
                                        <th>Type</th>
                                        <th>Patient</th>
                                        <th>Détails</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>CERT-2025-0034</strong></td>
                                        <td>08/12/2025</td>
                                        <td><span class="badge badge-warning">Arrêt travail</span></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">MB</div>
                                                <span>Mamadou Barry</span>
                                            </div>
                                        </td>
                                        <td>3 jours (08/12 - 10/12)</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="printer"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>CERT-2025-0033</strong></td>
                                        <td>06/12/2025</td>
                                        <td><span class="badge badge-success">Attestation soins</span></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">AD</div>
                                                <span>Aissatou Diallo</span>
                                            </div>
                                        </td>
                                        <td>Soins conservateurs - 1 500 000 GNF</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="printer"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>CERT-2025-0032</strong></td>
                                        <td>05/12/2025</td>
                                        <td><span class="badge badge-info">Aptitude</span></td>
                                        <td>
                                            <div class="patient-cell">
                                                <div class="patient-avatar">IK</div>
                                                <span>Ibrahima Keita</span>
                                            </div>
                                        </td>
                                        <td>Aptitude permis de conduire</td>
                                        <td>
                                            <div class="actions-cell">
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="eye"></i></button>
                                                <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="printer"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════════════════════
                     PAGE : RAPPORTS & STATISTIQUES
                     ═══════════════════════════════════════════════════════════ -->
                <div id="page-rapports" class="page">
                    <div class="page-header">
                        <div>
                            <h2 style="font-size: 1.5rem; margin-bottom: 4px;">Rapports & Statistiques</h2>
                            <p class="text-muted">Analyse d'activité du cabinet</p>
                        </div>
                        <div class="flex gap-2">
                            <select style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border);">
                                <option>Ce mois (Décembre 2025)</option>
                                <option>Mois dernier</option>
                                <option>Ce trimestre</option>
                                <option>Cette année</option>
                                <option>Personnalisé...</option>
                            </select>
                            <button class="btn btn-secondary">
                                <i data-lucide="download"></i>
                                Exporter PDF
                            </button>
                        </div>
                    </div>

                    <!-- KPIs -->
                    <div class="stats-grid" style="margin-bottom: 24px;">
                        <div class="stat-card">
                            <div class="stat-icon primary">
                                <i data-lucide="users"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Nouveaux patients</div>
                                <div class="stat-value">23</div>
                                <div class="stat-trend up">
                                    <i data-lucide="trending-up"></i>
                                    +15% vs mois dernier
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon success">
                                <i data-lucide="calendar-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">RDV honorés</div>
                                <div class="stat-value">142</div>
                                <div class="stat-trend up">
                                    <i data-lucide="trending-up"></i>
                                    92% taux de présence
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon warning">
                                <i data-lucide="banknote"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Chiffre d'affaires</div>
                                <div class="stat-value">245,8M GNF</div>
                                <div class="stat-trend up">
                                    <i data-lucide="trending-up"></i>
                                    +12% vs N-1
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon info">
                                <i data-lucide="stethoscope"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Actes réalisés</div>
                                <div class="stat-value">187</div>
                                <div class="stat-trend neutral">
                                    <i data-lucide="minus"></i>
                                    Stable
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
                        <!-- Graphique CA -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <i data-lucide="trending-up"></i>
                                    Évolution du chiffre d'affaires
                                </h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-placeholder">
                                    <div class="chart-bars">
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 60%;"></div>
                                            <span>Jan</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 75%;"></div>
                                            <span>Fév</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 65%;"></div>
                                            <span>Mar</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 80%;"></div>
                                            <span>Avr</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 70%;"></div>
                                            <span>Mai</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 85%;"></div>
                                            <span>Jun</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 55%;"></div>
                                            <span>Jul</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 60%;"></div>
                                            <span>Aoû</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 90%;"></div>
                                            <span>Sep</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 95%;"></div>
                                            <span>Oct</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar" style="height: 88%;"></div>
                                            <span>Nov</span>
                                        </div>
                                        <div class="chart-bar-group">
                                            <div class="chart-bar current" style="height: 78%;"></div>
                                            <span>Déc</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Répartition actes -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <i data-lucide="pie-chart"></i>
                                    Répartition des actes
                                </h3>
                            </div>
                            <div class="card-body">
                                <div class="donut-chart">
                                    <svg viewBox="0 0 36 36" class="circular-chart">
                                        <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                        <path class="circle" stroke="var(--primary)" stroke-dasharray="35, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                        <path class="circle" stroke="var(--success)" stroke-dasharray="25, 100" stroke-dashoffset="-35" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                        <path class="circle" stroke="var(--warning)" stroke-dasharray="20, 100" stroke-dashoffset="-60" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                        <path class="circle" stroke="var(--info)" stroke-dasharray="20, 100" stroke-dashoffset="-80" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                    </svg>
                                </div>
                                <div class="chart-legend">
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: var(--primary);"></span>
                                        <span>Soins conservateurs (35%)</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: var(--success);"></span>
                                        <span>Prévention (25%)</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: var(--warning);"></span>
                                        <span>Chirurgie (20%)</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: var(--info);"></span>
                                        <span>Prothèses (20%)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Top actes et Top patients -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 24px;">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <i data-lucide="award"></i>
                                    Actes les plus réalisés
                                </h3>
                            </div>
                            <div class="card-body">
                                <div class="ranking-list">
                                    <div class="ranking-item">
                                        <span class="rank">1</span>
                                        <div class="ranking-info">
                                            <strong>Détartrage complet</strong>
                                            <span class="text-muted">48 actes</span>
                                        </div>
                                        <span class="ranking-amount">31 200 000 GNF</span>
                                    </div>
                                    <div class="ranking-item">
                                        <span class="rank">2</span>
                                        <div class="ranking-info">
                                            <strong>Composite 1 face</strong>
                                            <span class="text-muted">35 actes</span>
                                        </div>
                                        <span class="ranking-amount">28 000 000 GNF</span>
                                    </div>
                                    <div class="ranking-item">
                                        <span class="rank">3</span>
                                        <div class="ranking-info">
                                            <strong>Extraction simple</strong>
                                            <span class="text-muted">28 actes</span>
                                        </div>
                                        <span class="ranking-amount">33 600 000 GNF</span>
                                    </div>
                                    <div class="ranking-item">
                                        <span class="rank">4</span>
                                        <div class="ranking-info">
                                            <strong>Couronne céramique</strong>
                                            <span class="text-muted">12 actes</span>
                                        </div>
                                        <span class="ranking-amount">78 000 000 GNF</span>
                                    </div>
                                    <div class="ranking-item">
                                        <span class="rank">5</span>
                                        <div class="ranking-info">
                                            <strong>Implant dentaire</strong>
                                            <span class="text-muted">5 actes</span>
                                        </div>
                                        <span class="ranking-amount">60 000 000 GNF</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <i data-lucide="alert-circle"></i>
                                    Indicateurs à surveiller
                                </h3>
                            </div>
                            <div class="card-body">
                                <div class="alerts-list">
                                    <div class="alert-item warning">
                                        <i data-lucide="clock"></i>
                                        <div>
                                            <strong>8 RDV annulés</strong>
                                            <p class="text-muted">Ce mois-ci (5.3% du total)</p>
                                        </div>
                                    </div>
                                    <div class="alert-item danger">
                                        <i data-lucide="banknote"></i>
                                        <div>
                                            <strong>32,4M GNF d'impayés</strong>
                                            <p class="text-muted">12 factures en attente</p>
                                        </div>
                                    </div>
                                    <div class="alert-item warning">
                                        <i data-lucide="package"></i>
                                        <div>
                                            <strong>3 produits en alerte stock</strong>
                                            <p class="text-muted">Commande recommandée</p>
                                        </div>
                                    </div>
                                    <div class="alert-item success">
                                        <i data-lucide="smile"></i>
                                        <div>
                                            <strong>Taux de retour patients : 78%</strong>
                                            <p class="text-muted">Excellent ! (+5% vs N-1)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- ═══════════════════════════════════════════════════════════
         MODALS
         ═══════════════════════════════════════════════════════════ -->
    <!-- Modal Nouveau Patient -->
    <div class="modal-overlay" id="modal-newPatient">
        <div class="modal">
            <div class="modal-header">
                <h3>Nouveau patient</h3>
                <button class="modal-close" onclick="closeModal('newPatient')">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="formNewPatient">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nom *</label>
                            <input type="text" id="patientNom" placeholder="Nom de famille" required>
                        </div>
                        <div class="form-group">
                            <label>Prénom *</label>
                            <input type="text" id="patientPrenom" placeholder="Prénom" required>
                        </div>
                        <div class="form-group">
                            <label>Date de naissance</label>
                            <input type="date" id="patientDateNaissance">
                        </div>
                        <div class="form-group">
                            <label>Sexe</label>
                            <select id="patientSexe">
                                <option value="">Sélectionner</option>
                                <option value="M">Homme</option>
                                <option value="F">Femme</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Téléphone *</label>
                            <input type="tel" id="patientTelephone" placeholder="+224 6XX XX XX XX" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="patientEmail" placeholder="email@exemple.com">
                        </div>
                        <div class="form-group full-width">
                            <label>Adresse</label>
                            <input type="text" id="patientAdresse" placeholder="Adresse complète">
                        </div>
                        <div class="form-group">
                            <label>Ville</label>
                            <input type="text" id="patientVille" placeholder="Conakry" value="Conakry">
                        </div>
                        <div class="form-group">
                            <label>Groupe sanguin</label>
                            <select id="patientGroupeSanguin">
                                <option value="">Non renseigné</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Allergies connues</label>
                            <textarea id="patientAllergies" rows="2" placeholder="Ex: Pénicilline, latex..."></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label>Antécédents médicaux</label>
                            <textarea id="patientAntecedents" rows="2" placeholder="Ex: Diabète, hypertension..."></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('newPatient')">Annuler</button>
                <button class="btn btn-primary" onclick="saveNewPatient()">
                    <i data-lucide="user-plus"></i>
                    Créer le patient
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Nouveau RDV -->
    <div class="modal-overlay" id="modal-newRdv">
        <div class="modal">
            <div class="modal-header">
                <h3>Nouveau rendez-vous</h3>
                <button class="modal-close" onclick="closeModal('newRdv')">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="formNewRdv">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>Patient *</label>
                            <select id="rdvPatientId" required>
                                <option value="">Sélectionner un patient...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date *</label>
                            <input type="date" id="rdvDate" required>
                        </div>
                        <div class="form-group">
                            <label>Heure début *</label>
                            <input type="time" id="rdvHeureDebut" required>
                        </div>
                        <div class="form-group">
                            <label>Durée</label>
                            <select id="rdvDuree">
                                <option value="15">15 min</option>
                                <option value="30" selected>30 min</option>
                                <option value="45">45 min</option>
                                <option value="60">60 min</option>
                                <option value="90">90 min</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Statut</label>
                            <select id="rdvStatut">
                                <option value="planifie">Planifié</option>
                                <option value="confirme">Confirmé</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Motif *</label>
                            <select id="rdvMotif" required>
                                <option value="Consultation">Consultation</option>
                                <option value="Contrôle">Contrôle annuel</option>
                                <option value="Détartrage">Détartrage</option>
                                <option value="Soin">Soin / Traitement</option>
                                <option value="Extraction">Extraction</option>
                                <option value="Prothèse">Prothèse</option>
                                <option value="Urgence">Urgence</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Notes</label>
                            <textarea id="rdvNotes" placeholder="Notes supplémentaires..."></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('newRdv')">Annuler</button>
                <button class="btn btn-primary" onclick="saveNewRdv()">
                    <i data-lucide="calendar-plus"></i>
                    Créer le RDV
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Nouvelle Ordonnance -->
    <div class="modal-overlay" id="modal-newOrdonnance">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h3>Nouvelle ordonnance</h3>
                <button class="modal-close" onclick="closeModal('newOrdonnance')">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Patient *</label>
                        <input type="text" placeholder="Rechercher un patient...">
                    </div>
                    <div class="form-group full-width">
                        <label>Médicaments</label>
                        <div style="border: 1px solid var(--border); border-radius: var(--radius-md); padding: 16px; background: var(--bg-main);">
                            <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                                <input type="text" placeholder="Nom du médicament" style="flex: 2;">
                                <input type="text" placeholder="Posologie" style="flex: 1;">
                                <input type="text" placeholder="Durée" style="flex: 1;">
                                <button class="btn btn-primary btn-sm"><i data-lucide="plus"></i></button>
                            </div>
                            <div class="text-muted" style="font-size: 0.85rem;">
                                <div style="padding: 8px; background: white; border-radius: 6px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;">
                                    <span><strong>Amoxicilline 500mg</strong> — 1 cp × 3/jour pendant 7 jours</span>
                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="trash-2"></i></button>
                                </div>
                                <div style="padding: 8px; background: white; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
                                    <span><strong>Doliprane 1000mg</strong> — 1 cp × 3/jour si douleur</span>
                                    <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="trash-2"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label>Instructions particulières</label>
                        <textarea placeholder="À prendre au milieu des repas..."></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('newOrdonnance')">Annuler</button>
                <button class="btn btn-secondary">
                    <i data-lucide="printer"></i>
                    Aperçu
                </button>
                <button class="btn btn-primary">
                    <i data-lucide="save"></i>
                    Enregistrer & Imprimer
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Nouveau Certificat -->
    <div class="modal-overlay" id="modal-newCertificat">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3>Nouveau certificat médical</h3>
                <button class="modal-close" onclick="closeModal('newCertificat')">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Patient *</label>
                        <input type="text" placeholder="Rechercher un patient...">
                    </div>
                    <div class="form-group full-width">
                        <label>Type de certificat *</label>
                        <select>
                            <option value="">Sélectionner...</option>
                            <option value="medical">Certificat médical simple</option>
                            <option value="arret">Arrêt de travail</option>
                            <option value="attestation">Attestation de soins</option>
                            <option value="aptitude">Certificat d'aptitude</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Date de début</label>
                        <input type="date">
                    </div>
                    <div class="form-group">
                        <label>Date de fin</label>
                        <input type="date">
                    </div>
                    <div class="form-group full-width">
                        <label>Observations / Motif</label>
                        <textarea placeholder="Décrire les observations médicales..."></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('newCertificat')">Annuler</button>
                <button class="btn btn-primary">
                    <i data-lucide="file-plus"></i>
                    Générer le certificat
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Nouvel Encaissement -->
    <div class="modal-overlay" id="modal-newEncaissement">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Nouvel encaissement</h3>
                <button class="modal-close" onclick="closeModal('newEncaissement')">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="formNewEncaissement">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>Type *</label>
                            <select id="encaissementType" required>
                                <option value="encaissement">Encaissement (entrée)</option>
                                <option value="decaissement">Décaissement (sortie)</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Référence facture ou motif *</label>
                            <input type="text" id="encaissementRef" placeholder="F-2025-XXXX ou description..." required>
                        </div>
                        <div class="form-group">
                            <label>Montant *</label>
                            <div class="input-with-suffix">
                                <input type="number" id="encaissementMontant" placeholder="0" required>
                                <span>GNF</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Mode de paiement *</label>
                            <select id="encaissementMode" required>
                                <option value="especes">Espèces</option>
                                <option value="orange">Orange Money</option>
                                <option value="mtn">MTN MoMo</option>
                                <option value="cb">Carte bancaire</option>
                                <option value="virement">Virement</option>
                                <option value="cheque">Chèque</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Notes</label>
                            <textarea id="encaissementNotes" placeholder="Détails supplémentaires..."></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('newEncaissement')">Annuler</button>
                <button class="btn btn-primary" onclick="saveNewEncaissement()">
                    <i data-lucide="check"></i>
                    Enregistrer
                </button>
            </div>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════
         SCRIPTS
         ═══════════════════════════════════════════════════════════ -->
    <script>
        // ═══════════════════════════════════════════════════════════
        // DONNÉES UTILISATEUR (injectées par le serveur)
        // ═══════════════════════════════════════════════════════════
        const currentUser = {{USER_DATA}};
        
        // Mettre à jour l'interface avec les données utilisateur
        document.addEventListener('DOMContentLoaded', function() {
            if (currentUser) {
                const fullName = 'Dr. ' + currentUser.prenom + ' ' + currentUser.nom;
                const initials = (currentUser.prenom[0] + currentUser.nom[0]).toUpperCase();
                
                const nameEl = document.getElementById('sidebarDoctorName');
                const avatarEl = document.getElementById('userAvatarInitials');
                
                if (nameEl) nameEl.textContent = fullName;
                if (avatarEl) avatarEl.textContent = initials;
            }
            
            // Charger les données initiales
            loadDashboardStats();
        });
        
        // ═══════════════════════════════════════════════════════════
        // API HELPER FUNCTIONS
        // ═══════════════════════════════════════════════════════════
        async function apiCall(endpoint, method = 'GET', data = null) {
            const options = {
                method,
                headers: { 'Content-Type': 'application/json' }
            };
            if (data) options.body = JSON.stringify(data);
            
            try {
                const response = await fetch(endpoint, options);
                if (!response.ok) throw new Error('Erreur API');
                return await response.json();
            } catch (error) {
                console.error('API Error:', error);
                throw error;
            }
        }
        
        // Charger les statistiques du dashboard
        async function loadDashboardStats() {
            try {
                const stats = await apiCall('/api/stats');
                
                // Mettre à jour les valeurs (si les éléments existent)
                const rdvEl = document.querySelector('.stat-card:nth-child(1) .stat-value');
                const patientsEl = document.querySelector('.stat-card:nth-child(2) .stat-value');
                const caEl = document.querySelector('.stat-card:nth-child(3) .stat-value');
                const impayesEl = document.querySelector('.stat-card:nth-child(4) .stat-value');
                
                if (rdvEl) rdvEl.textContent = stats.rdv_today || 0;
                if (patientsEl) patientsEl.textContent = new Intl.NumberFormat('fr-FR').format(stats.total_patients || 0);
                if (caEl) caEl.innerHTML = '<span class="currency-amount">' + formatGNF(stats.ca_month || 0) + '</span>';
                if (impayesEl) impayesEl.innerHTML = '<span class="currency-amount">' + formatGNF(stats.impayes || 0) + '</span>';
                
            } catch (error) {
                console.log('Utilisation des données de démo');
            }
        }
        
        // Formater en GNF
        function formatGNF(amount) {
            return new Intl.NumberFormat('fr-GN').format(Math.round(amount)) + ' GNF';
        }

        // Initialisation des icônes Lucide
        lucide.createIcons();

        // ─────────────────────────────────────────────────────────
        // Navigation entre les pages
        // ─────────────────────────────────────────────────────────
        const navItems = document.querySelectorAll('.nav-item[data-page]');
        const pages = document.querySelectorAll('.page');
        const pageTitle = document.getElementById('pageTitle');

        const pageTitles = {
            'dashboard': 'Tableau de bord',
            'patients': 'Patients',
            'fiche-patient': 'Fiche patient',
            'agenda': 'Agenda',
            'devis': 'Devis',
            'factures': 'Factures',
            'caisse': 'Caisse',
            'ordonnances': 'Ordonnances',
            'certificats': 'Certificats médicaux',
            'stock': 'Stock',
            'rapports': 'Rapports & Statistiques',
            'actes': 'Catalogue des actes',
            'parametres': 'Paramètres'
        };

        function showPage(pageId) {
            // Masquer toutes les pages
            pages.forEach(page => page.classList.remove('active'));
            
            // Afficher la page demandée
            const targetPage = document.getElementById('page-' + pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            }

            // Mettre à jour le titre
            pageTitle.textContent = pageTitles[pageId] || 'DentalCare Pro';

            // Mettre à jour la navigation active
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === pageId) {
                    item.classList.add('active');
                }
            });

            // Réinitialiser les icônes
            lucide.createIcons();
        }

        // Event listeners pour la navigation
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                showPage(item.dataset.page);
            });
        });

        // ─────────────────────────────────────────────────────────
        // Gestion des onglets (fiche patient)
        // ─────────────────────────────────────────────────────────
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.dataset.tab;

                // Retirer la classe active de tous les onglets
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));

                // Activer l'onglet cliqué
                tab.classList.add('active');
                const targetContent = document.getElementById('tab-' + targetTab);
                if (targetContent) {
                    targetContent.classList.add('active');
                }

                // Réinitialiser les icônes
                lucide.createIcons();
            });
        });

        // ─────────────────────────────────────────────────────────
        // Gestion des modals
        // ─────────────────────────────────────────────────────────
        function openModal(modalId) {
            const modal = document.getElementById('modal-' + modalId);
            if (modal) {
                modal.classList.add('active');
                lucide.createIcons();
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById('modal-' + modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }

        // Fermer le modal en cliquant sur l'overlay
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                }
            });
        });

        // Fermer avec Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                    modal.classList.remove('active');
                });
            }
        });

        // ─────────────────────────────────────────────────────────
        // Interaction Odontogramme
        // ─────────────────────────────────────────────────────────
        document.querySelectorAll('.tooth').forEach(tooth => {
            tooth.addEventListener('click', () => {
                const toothNumber = tooth.textContent;
                alert(`Dent ${toothNumber} sélectionnée\n\nDans l'application réelle, cela ouvrirait un menu pour :\n- Voir l'historique des soins\n- Ajouter une note\n- Planifier un soin`);
            });
        });

        // ─────────────────────────────────────────────────────────
        // Styles CSS supplémentaires pour les pages
        // ─────────────────────────────────────────────────────────
        const style = document.createElement('style');
        style.textContent = `
            .page {
                display: none;
                animation: fadeIn 0.3s ease;
            }
            .page.active {
                display: block;
            }
        `;
        document.head.appendChild(style);

        // ═══════════════════════════════════════════════════════════
        // SYSTÈME DE CONFIGURATION DÉMO
        // ═══════════════════════════════════════════════════════════
        
        // Configuration par défaut
        const defaultConfig = {
            cabinetName: 'Cabinet Dentaire Dr. Diallo',
            doctorName: 'Dr. Mamadou Diallo',
            address: 'Avenue de la République, Kaloum',
            city: 'Conakry',
            phone: '+224 621 00 00 00',
            currency: 'GNF'
        };
        
        // Taux de conversion (base : GNF)
        const exchangeRates = {
            GNF: 1,
            XOF: 0.065,        // 1 GNF ≈ 0.065 XOF
            XAF: 0.065,        // 1 GNF ≈ 0.065 XAF (même valeur que XOF)
            EUR: 0.0001,       // 1 GNF ≈ 0.0001 EUR
            USD: 0.00011,      // 1 GNF ≈ 0.00011 USD
            MAD: 0.0011,       // 1 GNF ≈ 0.0011 MAD
            DZD: 0.0145,       // 1 GNF ≈ 0.0145 DZD
            TND: 0.00034       // 1 GNF ≈ 0.00034 TND
        };
        
        // Symboles des devises
        const currencySymbols = {
            GNF: 'GNF',
            XOF: 'FCFA',
            XAF: 'FCFA',
            EUR: '€',
            USD: '$',
            MAD: 'DH',
            DZD: 'DA',
            TND: 'DT'
        };
        
        // Montants de base en GNF (valeurs réalistes pour la Guinée)
        const baseAmountsGNF = {
            caMonth: 245800000,        // CA du mois
            unpaid: 32400000,          // Impayés
            invoiceCA: 245800000,      // CA factures
            invoiceReceived: 213400000,// Encaissé
            invoicePending: 21400000,  // En attente
            invoiceOverdue: 11000000,  // En retard
            // Tarifs actes
            detartrage: 650000,
            composite: 800000,
            extractionSimple: 1200000,
            extractionSagesse: 1800000,
            couronne: 6500000,
            implant: 12000000,
            // Devis
            devis1: 24500000,
            devis2: 5800000,
            devis3: 12000000,
            // Factures
            facture1: 1850000,
            facture2: 4500000,
            facture2Paid: 2000000,
            facture2Due: 2500000,
            facture3: 6500000,
            // Fiche patient
            patientTotal: 12450000,
            patientPaid: 12450000,
            patientDue: 0,
            patientFacture1: 650000,
            patientDevis: 8500000,
            patientFacture2: 1800000
        };
        
        let currentCurrency = 'GNF';
        
        // Toggle du panneau de configuration
        function toggleDemoConfig() {
            const bar = document.getElementById('demoConfigBar');
            bar.classList.toggle('open');
            lucide.createIcons();
        }
        
        // Formater un montant selon la devise
        function formatCurrency(amountGNF, currency = currentCurrency) {
            const converted = amountGNF * exchangeRates[currency];
            const symbol = currencySymbols[currency];
            
            if (currency === 'GNF') {
                return new Intl.NumberFormat('fr-FR').format(Math.round(converted)) + ' ' + symbol;
            } else if (currency === 'EUR' || currency === 'USD') {
                return new Intl.NumberFormat('fr-FR', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(converted) + ' ' + symbol;
            } else {
                return new Intl.NumberFormat('fr-FR').format(Math.round(converted)) + ' ' + symbol;
            }
        }
        
        // Mettre à jour tous les montants affichés
        function updateAllAmounts() {
            // Stats dashboard
            updateAmount('.stat-value .currency-amount[data-amount="24580000"]', baseAmountsGNF.caMonth);
            updateAmount('.stat-value .currency-amount[data-amount="3240000"]', baseAmountsGNF.unpaid);
            
            // Page factures - stats
            const invoiceStats = document.querySelectorAll('#page-factures .invoice-stat .amount');
            if (invoiceStats.length >= 4) {
                invoiceStats[0].textContent = formatCurrency(baseAmountsGNF.invoiceCA);
                invoiceStats[1].textContent = formatCurrency(baseAmountsGNF.invoiceReceived);
                invoiceStats[2].textContent = formatCurrency(baseAmountsGNF.invoicePending);
                invoiceStats[3].textContent = formatCurrency(baseAmountsGNF.invoiceOverdue);
            }
            
            // Page actes - tarifs
            const actesTable = document.querySelector('#page-actes table tbody');
            if (actesTable) {
                const rows = actesTable.querySelectorAll('tr');
                const tarifs = [
                    baseAmountsGNF.detartrage,
                    baseAmountsGNF.composite,
                    baseAmountsGNF.extractionSimple,
                    baseAmountsGNF.extractionSagesse,
                    baseAmountsGNF.couronne,
                    baseAmountsGNF.implant
                ];
                rows.forEach((row, i) => {
                    if (tarifs[i]) {
                        const tarifCell = row.querySelector('td:nth-child(5) strong');
                        if (tarifCell) tarifCell.textContent = formatCurrency(tarifs[i]);
                    }
                });
            }
            
            // Page devis - tableau
            const devisTable = document.querySelector('#page-devis table tbody');
            if (devisTable) {
                const rows = devisTable.querySelectorAll('tr');
                const montants = [baseAmountsGNF.devis1, baseAmountsGNF.devis2, baseAmountsGNF.devis3];
                rows.forEach((row, i) => {
                    if (montants[i]) {
                        const montantCell = row.querySelector('td:nth-child(4) strong');
                        if (montantCell) montantCell.textContent = formatCurrency(montants[i]);
                    }
                });
            }
            
            // Page factures - tableau
            const facturesTable = document.querySelector('#page-factures table tbody');
            if (facturesTable) {
                const rows = facturesTable.querySelectorAll('tr');
                // Ligne 1
                if (rows[0]) {
                    const cells = rows[0].querySelectorAll('td');
                    if (cells[3]) cells[3].textContent = formatCurrency(baseAmountsGNF.facture1);
                    if (cells[4]) cells[4].textContent = formatCurrency(baseAmountsGNF.facture1);
                    if (cells[5]) cells[5].textContent = formatCurrency(0);
                }
                // Ligne 2
                if (rows[1]) {
                    const cells = rows[1].querySelectorAll('td');
                    if (cells[3]) cells[3].textContent = formatCurrency(baseAmountsGNF.facture2);
                    if (cells[4]) cells[4].textContent = formatCurrency(baseAmountsGNF.facture2Paid);
                    if (cells[5]) cells[5].textContent = formatCurrency(baseAmountsGNF.facture2Due);
                }
                // Ligne 3
                if (rows[2]) {
                    const cells = rows[2].querySelectorAll('td');
                    if (cells[3]) cells[3].textContent = formatCurrency(baseAmountsGNF.facture3);
                    if (cells[4]) cells[4].textContent = formatCurrency(0);
                    if (cells[5]) cells[5].textContent = formatCurrency(baseAmountsGNF.facture3);
                }
            }
            
            // Fiche patient - stats facturation
            const patientInvoiceStats = document.querySelectorAll('#tab-facturation .invoice-stat .amount');
            if (patientInvoiceStats.length >= 3) {
                patientInvoiceStats[0].textContent = formatCurrency(baseAmountsGNF.patientTotal);
                patientInvoiceStats[1].textContent = formatCurrency(baseAmountsGNF.patientPaid);
                patientInvoiceStats[2].textContent = formatCurrency(baseAmountsGNF.patientDue);
            }
            
            // Fiche patient - tableau factures
            const patientFacturesTable = document.querySelector('#tab-facturation table tbody');
            if (patientFacturesTable) {
                const rows = patientFacturesTable.querySelectorAll('tr');
                const montants = [baseAmountsGNF.patientFacture1, baseAmountsGNF.patientDevis, baseAmountsGNF.patientFacture2];
                rows.forEach((row, i) => {
                    if (montants[i]) {
                        const montantCell = row.querySelector('td:nth-child(4)');
                        if (montantCell) montantCell.textContent = formatCurrency(montants[i]);
                    }
                });
            }
        }
        
        // Mettre à jour un montant spécifique
        function updateAmount(selector, amountGNF) {
            const element = document.querySelector(selector);
            if (element) {
                element.textContent = formatCurrency(amountGNF);
            }
        }
        
        // Mettre à jour la devise
        function updateCurrency() {
            currentCurrency = document.getElementById('configCurrency').value;
            
            // Synchroniser avec les paramètres
            const settingsCurrency = document.getElementById('settingsCurrency');
            if (settingsCurrency) settingsCurrency.value = currentCurrency;
            
            // Mettre à jour tous les montants
            updateAllAmounts();
        }
        
        // Obtenir les initiales d'un nom
        function getInitials(name) {
            const parts = name.replace(/^(Dr\.|Dr|Docteur)\s*/i, '').trim().split(' ');
            if (parts.length >= 2) {
                return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
            }
            return parts[0].substring(0, 2).toUpperCase();
        }
        
        // Mettre à jour les informations du cabinet
        function updateCabinetInfo() {
            const cabinetName = document.getElementById('configCabinetName').value;
            const doctorName = document.getElementById('configDoctorName').value;
            const address = document.getElementById('configAddress').value;
            const city = document.getElementById('configCity').value;
            const phone = document.getElementById('configPhone').value;
            
            // Mettre à jour la sidebar
            const sidebarDoctorName = document.getElementById('sidebarDoctorName');
            if (sidebarDoctorName) sidebarDoctorName.textContent = doctorName;
            
            const userAvatar = document.getElementById('userAvatarInitials');
            if (userAvatar) userAvatar.textContent = getInitials(doctorName);
            
            // Synchroniser avec la page paramètres
            const settingsCabinetName = document.getElementById('settingsCabinetName');
            if (settingsCabinetName) settingsCabinetName.value = cabinetName;
            
            const settingsAddress = document.getElementById('settingsAddress');
            if (settingsAddress) settingsAddress.value = address;
            
            const settingsCity = document.getElementById('settingsCity');
            if (settingsCity) settingsCity.value = city;
            
            const settingsPhone = document.getElementById('settingsPhone');
            if (settingsPhone) settingsPhone.value = phone;
        }
        
        // Navigation dans les sections de paramètres
        function showSettingsSection(sectionId) {
            // Masquer toutes les sections
            document.querySelectorAll('.settings-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Désactiver tous les items de navigation
            document.querySelectorAll('.settings-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Afficher la section sélectionnée
            const targetSection = document.getElementById('settings-' + sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Activer l'item de navigation correspondant
            const navItem = document.querySelector('.settings-nav-item[data-settings="' + sectionId + '"]');
            if (navItem) {
                navItem.classList.add('active');
            }
            
            // Réinitialiser les icônes Lucide
            lucide.createIcons();
        }
        
        // Sauvegarder depuis la page paramètres
        function saveSettings() {
            // Récupérer les valeurs de la page paramètres
            const cabinetName = document.getElementById('settingsCabinetName').value;
            const address = document.getElementById('settingsAddress').value;
            const city = document.getElementById('settingsCity').value;
            const phone = document.getElementById('settingsPhone').value;
            const currency = document.getElementById('settingsCurrency').value;
            
            // Synchroniser avec le panneau de configuration
            document.getElementById('configCabinetName').value = cabinetName;
            document.getElementById('configAddress').value = address;
            document.getElementById('configCity').value = city;
            document.getElementById('configPhone').value = phone;
            document.getElementById('configCurrency').value = currency;
            
            // Mettre à jour la devise globale
            currentCurrency = currency;
            updateAllAmounts();
            
            // Feedback
            showNotification('Paramètres enregistrés avec succès !', 'success');
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS API - CRUD PATIENTS
        // ═══════════════════════════════════════════════════════════════════
        
        // Variable globale pour stocker les patients
        let patientsData = [];
        
        // Charger les patients depuis l'API
        async function loadPatients() {
            try {
                const response = await fetch('/api/patients');
                if (response.ok) {
                    patientsData = await response.json();
                    renderPatientsTable();
                    updatePatientSelects();
                }
            } catch (error) {
                console.log('Chargement patients depuis démo');
            }
        }
        
        // Afficher les patients dans le tableau
        function renderPatientsTable() {
            const tbody = document.querySelector('#page-patients table tbody');
            if (!tbody || patientsData.length === 0) return;
            
            tbody.innerHTML = patientsData.map(patient => `
                <tr onclick="viewPatient(${patient.id})" style="cursor: pointer;">
                    <td>
                        <div class="patient-info">
                            <div class="patient-avatar">${getInitials(patient.prenom + ' ' + patient.nom)}</div>
                            <div>
                                <strong>${patient.prenom} ${patient.nom}</strong>
                                <span class="text-muted">${patient.email || ''}</span>
                            </div>
                        </div>
                    </td>
                    <td>${patient.telephone || '-'}</td>
                    <td>${patient.date_naissance ? new Date(patient.date_naissance).toLocaleDateString('fr-FR') : '-'}</td>
                    <td><span class="badge badge-success">Actif</span></td>
                    <td>-</td>
                    <td>
                        <div class="table-actions">
                            <button class="btn btn-secondary btn-icon btn-sm" onclick="event.stopPropagation(); editPatient(${patient.id})">
                                <i data-lucide="edit"></i>
                            </button>
                            <button class="btn btn-secondary btn-icon btn-sm" onclick="event.stopPropagation(); deletePatient(${patient.id})">
                                <i data-lucide="trash-2"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            lucide.createIcons();
        }
        
        // Mettre à jour les selects de patients
        function updatePatientSelects() {
            const selects = document.querySelectorAll('#rdvPatientId, #ordoPatientId, #certPatientId, #devisPatientId, #facturePatientId');
            selects.forEach(select => {
                if (!select) return;
                const currentValue = select.value;
                select.innerHTML = '<option value="">Sélectionner un patient...</option>' +
                    patientsData.map(p => `<option value="${p.id}">${p.prenom} ${p.nom}</option>`).join('');
                if (currentValue) select.value = currentValue;
            });
        }
        
        // Sauvegarder un nouveau patient
        async function saveNewPatient() {
            const patient = {
                nom: document.getElementById('patientNom').value,
                prenom: document.getElementById('patientPrenom').value,
                date_naissance: document.getElementById('patientDateNaissance').value || null,
                sexe: document.getElementById('patientSexe').value || null,
                telephone: document.getElementById('patientTelephone').value,
                email: document.getElementById('patientEmail').value || null,
                adresse: document.getElementById('patientAdresse').value || null,
                ville: document.getElementById('patientVille').value || 'Conakry',
                groupe_sanguin: document.getElementById('patientGroupeSanguin').value || null,
                allergies: document.getElementById('patientAllergies').value || null,
                antecedents: document.getElementById('patientAntecedents').value || null
            };
            
            if (!patient.nom || !patient.prenom || !patient.telephone) {
                showNotification('Veuillez remplir les champs obligatoires', 'error');
                return;
            }
            
            try {
                const response = await fetch('/api/patients', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(patient)
                });
                
                if (response.ok) {
                    const newPatient = await response.json();
                    patientsData.unshift(newPatient);
                    renderPatientsTable();
                    updatePatientSelects();
                    closeModal('newPatient');
                    document.getElementById('formNewPatient').reset();
                    showNotification('Patient créé avec succès !', 'success');
                } else {
                    throw new Error('Erreur serveur');
                }
            } catch (error) {
                showNotification('Erreur lors de la création du patient', 'error');
                console.error(error);
            }
        }
        
        // Voir la fiche d'un patient
        function viewPatient(id) {
            const patient = patientsData.find(p => p.id === id);
            if (patient) {
                // Remplir la fiche patient
                const ficheNom = document.querySelector('#page-fiche-patient .patient-profile-name');
                if (ficheNom) ficheNom.textContent = patient.prenom + ' ' + patient.nom;
                
                showPage('fiche-patient');
            }
        }
        
        // Supprimer un patient
        async function deletePatient(id) {
            if (!confirm('Êtes-vous sûr de vouloir supprimer ce patient ?')) return;
            
            try {
                const response = await fetch(`/api/patients/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    patientsData = patientsData.filter(p => p.id !== id);
                    renderPatientsTable();
                    updatePatientSelects();
                    showNotification('Patient supprimé', 'success');
                }
            } catch (error) {
                showNotification('Erreur lors de la suppression', 'error');
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS API - CRUD RENDEZ-VOUS
        // ═══════════════════════════════════════════════════════════════════
        
        let appointmentsData = [];
        
        async function loadAppointments() {
            try {
                const response = await fetch('/api/appointments');
                if (response.ok) {
                    appointmentsData = await response.json();
                    renderAppointmentsTable();
                }
            } catch (error) {
                console.log('Chargement RDV depuis démo');
            }
        }
        
        function renderAppointmentsTable() {
            const container = document.querySelector('#page-agenda .appointments-list');
            if (!container || appointmentsData.length === 0) return;
            
            // Grouper par date
            const today = new Date().toISOString().split('T')[0];
            const todayRdv = appointmentsData.filter(r => r.date_rdv === today);
            
            if (todayRdv.length > 0) {
                container.innerHTML = todayRdv.map(rdv => `
                    <div class="appointment-item">
                        <div class="appointment-time">
                            <div class="time">${rdv.heure_debut?.slice(0,5) || '00:00'}</div>
                            <div class="duration">${rdv.heure_fin ? calculateDuration(rdv.heure_debut, rdv.heure_fin) : '30 min'}</div>
                        </div>
                        <div class="appointment-divider"></div>
                        <div class="appointment-details">
                            <h4>${rdv.patient_prenom || ''} ${rdv.patient_nom || 'Patient'}</h4>
                            <p>${rdv.motif || 'Consultation'}</p>
                        </div>
                        <span class="badge badge-${getStatutBadge(rdv.statut)}">${getStatutLabel(rdv.statut)}</span>
                    </div>
                `).join('');
            }
            
            lucide.createIcons();
        }
        
        function calculateDuration(start, end) {
            if (!start || !end) return '30 min';
            const [sh, sm] = start.split(':').map(Number);
            const [eh, em] = end.split(':').map(Number);
            const mins = (eh * 60 + em) - (sh * 60 + sm);
            return mins + ' min';
        }
        
        function getStatutBadge(statut) {
            const badges = { 'planifie': 'info', 'confirme': 'success', 'en_cours': 'warning', 'termine': 'secondary', 'annule': 'danger' };
            return badges[statut] || 'info';
        }
        
        function getStatutLabel(statut) {
            const labels = { 'planifie': 'Planifié', 'confirme': 'Confirmé', 'en_cours': 'En cours', 'termine': 'Terminé', 'annule': 'Annulé' };
            return labels[statut] || statut;
        }
        
        async function saveNewRdv() {
            const duree = parseInt(document.getElementById('rdvDuree').value);
            const heureDebut = document.getElementById('rdvHeureDebut').value;
            
            // Calculer heure de fin
            const [h, m] = heureDebut.split(':').map(Number);
            const endMinutes = h * 60 + m + duree;
            const heureFin = `${Math.floor(endMinutes/60).toString().padStart(2,'0')}:${(endMinutes%60).toString().padStart(2,'0')}`;
            
            const rdv = {
                patient_id: document.getElementById('rdvPatientId').value,
                date_rdv: document.getElementById('rdvDate').value,
                heure_debut: heureDebut,
                heure_fin: heureFin,
                motif: document.getElementById('rdvMotif').value,
                notes: document.getElementById('rdvNotes').value,
                statut: document.getElementById('rdvStatut').value
            };
            
            if (!rdv.patient_id || !rdv.date_rdv || !rdv.heure_debut) {
                showNotification('Veuillez remplir les champs obligatoires', 'error');
                return;
            }
            
            try {
                const response = await fetch('/api/appointments', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(rdv)
                });
                
                if (response.ok) {
                    const newRdv = await response.json();
                    appointmentsData.unshift(newRdv);
                    renderAppointmentsTable();
                    closeModal('newRdv');
                    document.getElementById('formNewRdv').reset();
                    showNotification('Rendez-vous créé avec succès !', 'success');
                    loadDashboardStats();
                } else {
                    throw new Error('Erreur serveur');
                }
            } catch (error) {
                showNotification('Erreur lors de la création du RDV', 'error');
                console.error(error);
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS API - STOCK
        // ═══════════════════════════════════════════════════════════════════
        
        let stockData = [];
        
        async function loadStock() {
            try {
                const response = await fetch('/api/stock');
                if (response.ok) {
                    stockData = await response.json();
                    renderStockTable();
                }
            } catch (error) {
                console.log('Chargement stock depuis démo');
            }
        }
        
        function renderStockTable() {
            const tbody = document.querySelector('#page-stock table tbody');
            if (!tbody || stockData.length === 0) return;
            
            tbody.innerHTML = stockData.map(item => {
                const isLow = item.quantite <= item.seuil_alerte;
                return `
                <tr>
                    <td><strong>${item.nom}</strong></td>
                    <td>${item.categorie || '-'}</td>
                    <td>
                        <span class="${isLow ? 'text-danger' : ''}">${item.quantite}</span> ${item.unite || ''}
                        ${isLow ? '<i data-lucide="alert-triangle" class="text-danger" style="width:14px;height:14px;margin-left:4px;"></i>' : ''}
                    </td>
                    <td>${item.seuil_alerte || 10}</td>
                    <td>${item.fournisseur || '-'}</td>
                    <td>
                        <div class="table-actions">
                            <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="plus"></i></button>
                            <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="minus"></i></button>
                        </div>
                    </td>
                </tr>
            `}).join('');
            
            lucide.createIcons();
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS API - ACTES
        // ═══════════════════════════════════════════════════════════════════
        
        let actesData = [];
        
        async function loadActes() {
            try {
                const response = await fetch('/api/actes');
                if (response.ok) {
                    actesData = await response.json();
                    renderActesTable();
                }
            } catch (error) {
                console.log('Chargement actes depuis démo');
            }
        }
        
        function renderActesTable() {
            const tbody = document.querySelector('#page-actes table tbody');
            if (!tbody || actesData.length === 0) return;
            
            tbody.innerHTML = actesData.map(acte => `
                <tr>
                    <td><code>${acte.code || '-'}</code></td>
                    <td><strong>${acte.nom}</strong></td>
                    <td>${acte.categorie || '-'}</td>
                    <td>${acte.duree_moyenne ? acte.duree_moyenne + ' min' : '-'}</td>
                    <td><strong>${formatGNF(acte.tarif)}</strong></td>
                    <td>
                        <button class="btn btn-secondary btn-icon btn-sm"><i data-lucide="edit"></i></button>
                    </td>
                </tr>
            `).join('');
            
            lucide.createIcons();
        }

        // ═══════════════════════════════════════════════════════════════════
        // NOTIFICATIONS
        // ═══════════════════════════════════════════════════════════════════
        
        function showNotification(message, type = 'info') {
            // Créer l'élément de notification
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <i data-lucide="${type === 'success' ? 'check-circle' : type === 'error' ? 'x-circle' : 'info'}"></i>
                <span>${message}</span>
            `;
            
            // Styles inline
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                gap: 12px;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                box-shadow: 0 10px 25px -5px rgba(0,0,0,0.2);
                font-weight: 500;
            `;
            
            if (type === 'success') {
                notification.style.background = '#10b981';
                notification.style.color = 'white';
            } else if (type === 'error') {
                notification.style.background = '#ef4444';
                notification.style.color = 'white';
            } else {
                notification.style.background = '#0891b2';
                notification.style.color = 'white';
            }
            
            document.body.appendChild(notification);
            lucide.createIcons();
            
            // Supprimer après 3 secondes
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ═══════════════════════════════════════════════════════════════════
        // INITIALISATION AU CHARGEMENT
        // ═══════════════════════════════════════════════════════════════════
        
        document.addEventListener('DOMContentLoaded', function() {
            // Charger toutes les données
            loadPatients();
            loadAppointments();
            loadStock();
            loadActes();
            
            // Définir la date du jour pour le formulaire RDV
            const today = new Date().toISOString().split('T')[0];
            const rdvDateInput = document.getElementById('rdvDate');
            if (rdvDateInput) rdvDateInput.value = today;
        });

        // Styles pour les animations
        const styleSheet = document.createElement('style');
        styleSheet.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(styleSheet);

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS RECHERCHE GLOBALE
        // ═══════════════════════════════════════════════════════════════════
        
        function handleGlobalSearch(event) {
            const query = event.target.value.toLowerCase().trim();
            if (event.key === 'Enter' && query.length > 0) {
                // Rechercher dans les patients
                showPage('patients');
                document.getElementById('filterPatientSearch').value = query;
                filterPatients();
                showNotification(`Recherche: "${query}"`, 'info');
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS NOTIFICATIONS & MESSAGES
        // ═══════════════════════════════════════════════════════════════════
        
        function openNotificationsPanel() {
            showNotification('🔔 3 nouvelles notifications\n- RDV confirmé: Marie Dupont\n- Stock bas: Gants latex\n- Facture impayée: F-2025-0918', 'info');
        }
        
        function openMessagesPanel() {
            showNotification('📩 Aucun nouveau message', 'info');
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS FILTRES PATIENTS
        // ═══════════════════════════════════════════════════════════════════
        
        function filterPatients() {
            const searchQuery = document.getElementById('filterPatientSearch').value.toLowerCase();
            const statusFilter = document.getElementById('filterPatientStatus').value;
            const insuranceFilter = document.getElementById('filterPatientInsurance').value;
            
            const rows = document.querySelectorAll('#page-patients table tbody tr');
            let visibleCount = 0;
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                const matchesSearch = !searchQuery || text.includes(searchQuery);
                const matchesStatus = !statusFilter || text.includes(statusFilter === 'actif' ? 'actif' : 'inactif');
                const matchesInsurance = !insuranceFilter || text.includes(insuranceFilter.toLowerCase());
                
                if (matchesSearch && matchesStatus && matchesInsurance) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });
            
            // Mettre à jour le compteur
            const countEl = document.querySelector('#page-patients .page-header p');
            if (countEl) countEl.textContent = `${visibleCount} patients trouvés`;
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS FILTRES FACTURES
        // ═══════════════════════════════════════════════════════════════════
        
        function filterFactures() {
            const statusFilter = document.getElementById('filterFactureStatus').value;
            const rows = document.querySelectorAll('#page-factures table tbody tr');
            
            rows.forEach(row => {
                const badge = row.querySelector('.badge');
                if (!badge) return;
                
                const status = badge.textContent.toLowerCase();
                let show = true;
                
                if (statusFilter === 'reglee' && !status.includes('réglée')) show = false;
                if (statusFilter === 'attente' && !status.includes('partiel') && !status.includes('attente')) show = false;
                if (statusFilter === 'retard' && !status.includes('impayée')) show = false;
                
                row.style.display = show ? '' : 'none';
            });
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS DEVIS
        // ═══════════════════════════════════════════════════════════════════
        
        function viewDevis(ref) {
            showNotification(`📄 Affichage du devis ${ref}`, 'info');
            // TODO: Ouvrir modal avec détails du devis
        }
        
        function sendDevis(ref) {
            showNotification(`📧 Devis ${ref} envoyé par email`, 'success');
        }
        
        function convertDevisToFacture(ref) {
            if (confirm(`Convertir le devis ${ref} en facture ?`)) {
                showNotification(`✅ Devis ${ref} converti en facture`, 'success');
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS FACTURES
        // ═══════════════════════════════════════════════════════════════════
        
        function viewFacture(ref) {
            showNotification(`📄 Affichage de la facture ${ref}`, 'info');
            // TODO: Ouvrir modal avec détails de la facture
        }
        
        function downloadFacture(ref) {
            showNotification(`⬇️ Téléchargement de la facture ${ref}...`, 'info');
            // Simuler téléchargement
            setTimeout(() => {
                showNotification(`✅ Facture ${ref} téléchargée`, 'success');
            }, 1000);
        }
        
        function sendRappelFacture(ref) {
            if (confirm(`Envoyer un rappel de paiement pour la facture ${ref} ?`)) {
                showNotification(`📧 Rappel envoyé pour ${ref}`, 'success');
            }
        }
        
        function exportFacturesCSV() {
            showNotification('⬇️ Export CSV des factures en cours...', 'info');
            setTimeout(() => {
                showNotification('✅ Export CSV terminé', 'success');
            }, 1500);
        }

        // ═══════════════════════════════════════════════════════════════════
        // FONCTIONS CAISSE
        // ═══════════════════════════════════════════════════════════════════
        
        function filterCaisseMouvements() {
            const filter = document.getElementById('filterCaisseMouvement').value;
            const rows = document.querySelectorAll('#page-caisse table tbody tr');
            
            rows.forEach(row => {
                const typeCell = row.querySelector('td:nth-child(2)');
                if (!typeCell) return;
                
                const type = typeCell.textContent.toLowerCase();
                let show = true;
                
                if (filter === 'encaissement' && !type.includes('encaissement')) show = false;
                if (filter === 'decaissement' && !type.includes('décaissement')) show = false;
                
                row.style.display = show ? '' : 'none';
            });
        }
        
        function printZCaisse() {
            showNotification('🖨️ Impression du Z de caisse...', 'info');
            setTimeout(() => {
                window.print();
            }, 500);
        }
        
        async function saveNewEncaissement() {
            const type = document.getElementById('encaissementType').value;
            const ref = document.getElementById('encaissementRef').value;
            const montant = document.getElementById('encaissementMontant').value;
            const mode = document.getElementById('encaissementMode').value;
            const notes = document.getElementById('encaissementNotes').value;
            
            if (!ref || !montant) {
                showNotification('Veuillez remplir tous les champs obligatoires', 'error');
                return;
            }
            
            try {
                const response = await fetch('/api/paiements', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        type: type,
                        reference: ref,
                        montant: parseFloat(montant),
                        mode_paiement: mode,
                        notes: notes
                    })
                });
                
                if (response.ok) {
                    closeModal('newEncaissement');
                    document.getElementById('formNewEncaissement').reset();
                    showNotification(`✅ ${type === 'encaissement' ? 'Encaissement' : 'Décaissement'} enregistré: ${formatGNF(montant)}`, 'success');
                } else {
                    throw new Error('Erreur serveur');
                }
            } catch (error) {
                // Mode démo - simuler l'enregistrement
                closeModal('newEncaissement');
                document.getElementById('formNewEncaissement').reset();
                showNotification(`✅ ${type === 'encaissement' ? 'Encaissement' : 'Décaissement'} enregistré: ${formatGNF(montant)}`, 'success');
            }
        }
        
        function printMouvement(ref) {
            showNotification(`🖨️ Impression du mouvement ${ref}...`, 'info');
        }

        // ═══════════════════════════════════════════════════════════════════
        // MODALS SUPPLÉMENTAIRES (Devis, Facture)
        // ═══════════════════════════════════════════════════════════════════
        
        // Ces modals seront créés dynamiquement
        function createModalsIfNeeded() {
            // Modal Nouveau Devis
            if (!document.getElementById('modal-newDevis')) {
                const modalDevis = document.createElement('div');
                modalDevis.className = 'modal-overlay';
                modalDevis.id = 'modal-newDevis';
                modalDevis.innerHTML = `
                    <div class="modal" style="max-width: 600px;">
                        <div class="modal-header">
                            <h3>Nouveau devis</h3>
                            <button class="modal-close" onclick="closeModal('newDevis')">
                                <i data-lucide="x"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label>Patient *</label>
                                    <select id="devisPatientId" required>
                                        <option value="">Sélectionner un patient...</option>
                                    </select>
                                </div>
                                <div class="form-group full-width">
                                    <label>Actes</label>
                                    <select id="devisActe">
                                        <option value="">Ajouter un acte...</option>
                                    </select>
                                </div>
                                <div class="form-group full-width">
                                    <label>Observations</label>
                                    <textarea id="devisObservations" placeholder="Notes sur le devis..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeModal('newDevis')">Annuler</button>
                            <button class="btn btn-primary" onclick="saveNewDevis()">
                                <i data-lucide="save"></i>
                                Créer le devis
                            </button>
                        </div>
                    </div>
                `;
                document.body.appendChild(modalDevis);
            }
            
            // Modal Nouvelle Facture
            if (!document.getElementById('modal-newFacture')) {
                const modalFacture = document.createElement('div');
                modalFacture.className = 'modal-overlay';
                modalFacture.id = 'modal-newFacture';
                modalFacture.innerHTML = `
                    <div class="modal" style="max-width: 600px;">
                        <div class="modal-header">
                            <h3>Nouvelle facture</h3>
                            <button class="modal-close" onclick="closeModal('newFacture')">
                                <i data-lucide="x"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label>Patient *</label>
                                    <select id="facturePatientId" required>
                                        <option value="">Sélectionner un patient...</option>
                                    </select>
                                </div>
                                <div class="form-group full-width">
                                    <label>Actes</label>
                                    <select id="factureActe">
                                        <option value="">Ajouter un acte...</option>
                                    </select>
                                </div>
                                <div class="form-group full-width">
                                    <label>Notes</label>
                                    <textarea id="factureNotes" placeholder="Notes sur la facture..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeModal('newFacture')">Annuler</button>
                            <button class="btn btn-primary" onclick="saveNewFacture()">
                                <i data-lucide="save"></i>
                                Créer la facture
                            </button>
                        </div>
                    </div>
                `;
                document.body.appendChild(modalFacture);
            }
            
            lucide.createIcons();
        }
        
        function saveNewDevis() {
            const patientId = document.getElementById('devisPatientId').value;
            if (!patientId) {
                showNotification('Veuillez sélectionner un patient', 'error');
                return;
            }
            closeModal('newDevis');
            showNotification('✅ Devis créé avec succès', 'success');
        }
        
        function saveNewFacture() {
            const patientId = document.getElementById('facturePatientId').value;
            if (!patientId) {
                showNotification('Veuillez sélectionner un patient', 'error');
                return;
            }
            closeModal('newFacture');
            showNotification('✅ Facture créée avec succès', 'success');
        }
        
        // Créer les modals au chargement
        document.addEventListener('DOMContentLoaded', function() {
            createModalsIfNeeded();
            
            // Mettre à jour la date de la caisse
            const caisseDate = document.getElementById('caisseDate');
            if (caisseDate) {
                const today = new Date();
                const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
                caisseDate.textContent = today.toLocaleDateString('fr-FR', options);
            }
        });


        // ═══════════════════════════════════════════════════════════════════
        // CORRECTIONS V1.1 - Fonctions manquantes
        // ═══════════════════════════════════════════════════════════════════

        // Fonction: editPatient
        function editPatient(id) {
            const patient = patientsData.find(p => p.id === id);
            if (!patient) {
                showNotification('Patient non trouvé', 'error');
                return;
            }
            
            openModal('newPatient');
            
            const modalTitle = document.querySelector('#modal-newPatient .modal-header h3');
            if (modalTitle) modalTitle.textContent = 'Modifier le patient';
            
            document.getElementById('patientNom').value = patient.nom || '';
            document.getElementById('patientPrenom').value = patient.prenom || '';
            document.getElementById('patientTel').value = patient.telephone || '';
            document.getElementById('patientEmail').value = patient.email || '';
            document.getElementById('patientDateNaissance').value = patient.date_naissance || '';
            document.getElementById('patientAdresse').value = patient.adresse || '';
            document.getElementById('patientNotes').value = patient.notes_medicales || '';
            
            const form = document.getElementById('formNewPatient');
            if (form) form.dataset.editId = id;
            
            showNotification('Modification du patient: ' + patient.prenom + ' ' + patient.nom, 'info');
        }

        // Fonction: saveNewOrdonnance
        function saveNewOrdonnance() {
            const patientId = document.getElementById('ordonnancePatient').value;
            if (!patientId) {
                showNotification('Veuillez sélectionner un patient', 'error');
                return;
            }
            
            const prescriptions = document.getElementById('ordonnancePrescriptions').value;
            if (!prescriptions.trim()) {
                showNotification('Veuillez saisir les prescriptions', 'error');
                return;
            }
            
            closeModal('newOrdonnance');
            showNotification('✅ Ordonnance créée avec succès', 'success');
            
            document.getElementById('ordonnancePatient').value = '';
            document.getElementById('ordonnancePrescriptions').value = '';
        }

        // Fonction: saveNewCertificat
        function saveNewCertificat() {
            const patientId = document.getElementById('certificatPatient').value;
            if (!patientId) {
                showNotification('Veuillez sélectionner un patient', 'error');
                return;
            }
            
            closeModal('newCertificat');
            showNotification('✅ Certificat médical créé avec succès', 'success');
        }

    </script>
    
</body>
</html>
